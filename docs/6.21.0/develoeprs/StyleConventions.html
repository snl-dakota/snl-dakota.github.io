<!-- HTML header for doxygen 1.8.20-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<meta name="description" content="Dakota Developers Manual" />
<meta name="keywords" content="optimization, uncertainty quantification, model calibration, parameter estimation, sensitivity analysis, parallel computing, developers manual" />
<meta name="sandia.approval_type" content="formal" />
<meta name="sandia.approved" content="2010-2185" />
<link rev="owns" title="Brian M. Adams" href="mailto:briadam@sandia.gov" />
<meta name="Author" content="Brian M. Adams" />
<title>Dakota: Coding Style Guidelines and Conventions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="DAKOTA_Arrow_Name_77x55.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Dakota
   &#160;<span id="projectnumber">Version 6.21</span>
   </div>
   <div id="projectbrief">Explore and Predict with Confidence</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Coding Style Guidelines and Conventions </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p> 
<b>Style Guidelines and Conventions</b>
<ul>
<li> <a href="StyleConventions.html#StyleConventionsIntro">Introduction</a>
<li> <a href="StyleConventions.html#StyleConventionsCpp">C++/c Style Guidelines</a>
  <ul>
  <li> <a href="StyleConventions.html#StyleConventionsCV">Class and variable styles</a>
  <li> <a href="StyleConventions.html#StyleConventionsFn">Function styles</a>
  <li> <a href="StyleConventions.html#StyleConventionsMisc">Miscellaneous</a>
  </ul>
<li> <a href="StyleConventions.html#StyleConventionsFile">File Naming Conventions</a>
<li> <a href="StyleConventions.html#StyleConventionsDox">
     Class Documentation Conventions</a>

<li> <a href="StyleConventions.html#StyleConventionsCMake">CMake Style Guidelines</a>
  <ul>
  <li> <a href="StyleConventions.html#StyleConventionsCMakeFormat">CMake Code Formatting</a>
  <li> <a href="StyleConventions.html#StyleConventionsCMakeVars">CMake Variable Naming Conventions</a>
  </ul>
</ul>
</p>
<h1><a class="anchor" id="StyleConventionsIntro"></a>
Introduction</h1>
<p>Common code development practices can be extremely useful in multiple developer environments. Particular styles for code components lead to improved readability of the code and can provide important visual cues to other developers. Much of this recommended practices document is borrowed from the CUBIT mesh generation project, which in turn borrows its recommended practices from other projects, yielding some consistency across Sandia projects. While not strict requirements, these guidelines suggest a best-practices starting point for coding in Dakota.</p>
<h1><a class="anchor" id="StyleConventionsCpp"></a>
C++/c Style Guidelines</h1>
<p>Style guidelines involve the ability to discern at a glance the type and scope of a variable or function.</p>
<h2><a class="anchor" id="StyleConventionsCV"></a>
Class and variable styles</h2>
<p>Class names should be composed of two or more descriptive words, with the first character of each word capitalized, e.g.: </p><div class="fragment"><div class="line"><span class="keyword">class </span>ClassName;</div>
</div><!-- fragment --><p>Class member variables should be composed of two or more descriptive words, with the first character of the second and succeeding words capitalized, e.g.: </p><div class="fragment"><div class="line"><span class="keywordtype">double</span> classMemberVariable;</div>
</div><!-- fragment --><p>Temporary (i.e. local) variables are lower case, with underscores separating words in a multiple word temporary variable, e.g.: </p><div class="fragment"><div class="line"><span class="keywordtype">int</span> temporary_variable;</div>
</div><!-- fragment --><p>Constants (i.e. parameters) and enumeration values are upper case, with underscores separating words, e.g.: </p><div class="fragment"><div class="line"><span class="keyword">const</span> <span class="keywordtype">double</span> CONSTANT_VALUE;</div>
</div><!-- fragment --><h2><a class="anchor" id="StyleConventionsFn"></a>
Function styles</h2>
<p>Function names are lower case, with underscores separating words, e.g.: </p><div class="fragment"><div class="line"><span class="keywordtype">int</span> function_name();</div>
</div><!-- fragment --><p> There is no need to distinguish between member and non-member functions by style, as this distinction is usually clear by context. This style convention allows member function names which set and return the value of a similarly-named private member variable, e.g.: </p><div class="fragment"><div class="line"><span class="keywordtype">int</span> memberVariable;</div>
<div class="line"><span class="keywordtype">void</span> member_variable(<span class="keywordtype">int</span> a) { <span class="comment">// set</span></div>
<div class="line">  memberVariable = a;</div>
<div class="line">}</div>
<div class="line"><span class="keywordtype">int</span> member_variable()<span class="keyword"> const </span>{ <span class="comment">// get</span></div>
<div class="line">  <span class="keywordflow">return</span> memberVariable;</div>
<div class="line">}</div>
</div><!-- fragment --><p>In cases where the data to be set or returned is more than a few bytes, it is highly desirable to employ const references to avoid unnecessary copying, e.g.: </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> continuous_variables(<span class="keyword">const</span> RealVector&amp; c_vars) { <span class="comment">// set</span></div>
<div class="line">  continuousVariables = c_vars;</div>
<div class="line">}</div>
<div class="line"><span class="keyword">const</span> <a class="code" href="namespacedakota.html#a77b2775985ff72df0799f4fdbd53a270">RealVector</a>&amp; continuous_variables()<span class="keyword"> const </span>{      <span class="comment">// get</span></div>
<div class="line">  <span class="keywordflow">return</span> continuousVariables;</div>
<div class="line">}</div>
</div><!-- fragment --><p>Note that it is not necessary to always accept the returned data as a const reference. If it is desired to be able change this data, then accepting the result as a new variable will generate a copy, e.g.: </p><div class="fragment"><div class="line"><span class="comment">// reference to continuousVariables cannot be changed</span></div>
<div class="line"><span class="keyword">const</span> <a class="code" href="namespacedakota.html#a77b2775985ff72df0799f4fdbd53a270">RealVector</a>&amp; c_vars = model.continuous_variables();</div>
<div class="line"><span class="comment">// local copy of continuousVariables can be changed</span></div>
<div class="line"><a class="code" href="namespacedakota.html#a77b2775985ff72df0799f4fdbd53a270">RealVector</a> c_vars = model.continuous_variables();</div>
</div><!-- fragment --><p>Finally, many classes provide move constructors (including all standard library objects such as std::vectors), which reduce unnecessary copying. If a function creates such an object, it's generally fine for the return type to just be the class of the object, not a const reference.</p>
<h2><a class="anchor" id="StyleConventionsMisc"></a>
Miscellaneous</h2>
<p>Appearance of typedefs to redefine or alias basic types is isolated to a few header files (<code>data_types.h</code>, <code>template_defs.h</code>), so that issues like program precision can be changed by changing a few lines of typedefs rather than many lines of code, e.g.: </p><div class="fragment"><div class="line"><span class="keyword">typedef</span> <span class="keywordtype">double</span> <a class="code" href="namespacedakota.html#a4b04262b81aa7d31eb5d2f607e2a35de">Real</a>;</div>
</div><!-- fragment --><p><code>xemacs</code> is the preferred source code editor, as it has C++ modes for enhancing readability through color (turn on "Syntax highlighting"). Other helpful features include "Paren highlighting" for matching parentheses and the "New Frame" utility to have more than one window operating on the same set of files (note that this is still the same edit session, so all windows are synchronized with each other). Window width should be set to 80 internal columns, which can be accomplished by manual resizing, or preferably, using the following alias in your shell resource file (e.g., <code></code>.cshrc): </p><pre class="fragment">alias xemacs "xemacs -g 81x63"
</pre><p> where an external width of 81 gives 80 columns internal to the window and the desired height of the window will vary depending on monitor size. This window width imposes a coding standard since you should avoid line wrapping by continuing anything over 80 columns onto the next line.</p>
<p>Indenting increments are 2 spaces per indent and comments are aligned with the code they describe, e.g.: </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> <a class="code" href="namespaceDakota.html#acff531cb7537cad348ae92c039e02d99">abort_handler</a>(<span class="keywordtype">int</span> code)</div>
<div class="line">{</div>
<div class="line">  <span class="keywordtype">int</span> initialized = 0;</div>
<div class="line">  MPI_Initialized(&amp;initialized);</div>
<div class="line">  <span class="keywordflow">if</span> (initialized) {</div>
<div class="line">    <span class="comment">// comment aligned to block it describes</span></div>
<div class="line">    <span class="keywordtype">int</span> size;</div>
<div class="line">    MPI_Comm_size(MPI_COMM_WORLD, &amp;size);</div>
<div class="line">    <span class="keywordflow">if</span> (size&gt;1)</div>
<div class="line">      MPI_Abort(MPI_COMM_WORLD, code);</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">      exit(code);</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">else</span></div>
<div class="line">    exit(code);</div>
<div class="line">}</div>
</div><!-- fragment --><p>Also, the continuation of a long command is indented 2 spaces, e.g.: </p><div class="fragment"><div class="line"><span class="keyword">const</span> String&amp; iterator_scheduling</div>
<div class="line">  = problem_db.get_string(<span class="stringliteral">&quot;strategy.iterator_scheduling&quot;</span>);</div>
</div><!-- fragment --><p>and similar lines are aligned for readability, e.g.: </p><div class="fragment"><div class="line">cout &lt;&lt; <span class="stringliteral">&quot;Numerical gradients using &quot;</span> &lt;&lt; finiteDiffStepSize*100. &lt;&lt; <span class="stringliteral">&quot;%&quot;</span></div>
<div class="line">     &lt;&lt; finiteDiffType &lt;&lt; <span class="stringliteral">&quot; differences\nto be calculated by the &quot;</span></div>
<div class="line">     &lt;&lt; methodSource &lt;&lt; <span class="stringliteral">&quot; finite difference routine.&quot;</span> &lt;&lt; endl;</div>
</div><!-- fragment --><p>Lastly, #ifdef's are not indented (to make use of syntax highlighting in xemacs).</p>
<h1><a class="anchor" id="StyleConventionsFile"></a>
File Naming Conventions</h1>
<p>In addition to the style outlined above, the following file naming conventions have been established for the Dakota project.</p>
<p>File names for C++ classes should, in general, use the same name as the class defined by the file. Exceptions include: </p><ul>
<li>
with the introduction of the <a class="el" href="namespaceDakota.html" title="The primary namespace for DAKOTA.">Dakota</a> namespace, base classes which previously utilized prepended Dakota identifiers can now safely omit the identifiers. However, since file names do not have namespace protection from name collisions, they retain the prepended Dakota identifier. For example, a class previously named DakotaModel which resided in DakotaModel.cpp/hpp, is now <a class="el" href="classDakota_1_1Model.html" title="Base class for the model class hierarchy.">Dakota::Model</a> (class <a class="el" href="classDakota_1_1Model.html" title="Base class for the model class hierarchy.">Model</a> in namespace Dakota) residing in the same filenames. The retention of the previous filenames reduces the possibility of multiple instances of a Model.hpp causing problems. Derived classes (e.g., <a class="el" href="classDakota_1_1NestedModel.html" title="Derived model class which performs a complete sub-iterator execution within every evaluation of the m...">NestedModel</a>) do not require a prepended Dakota identifier for either the class or file names. </li>
<li>
in a few cases, it is convenient to maintain several closely related classes in a single file, in which case the file name may reflect the top level class or some generalization of the set of classes (e.g., DakotaResponse.[CH] files contain <a class="el" href="classDakota_1_1Response.html" title="Container class for response functions and their derivatives.   Response provides the enveloper base ...">Dakota::Response</a> and Dakota::ResponseRep classes, and DakotaBinStream.[CH] files contain the Dakota::BiStream and Dakota::BoStream classes). </li>
</ul>
<p>The type of file is determined by one of the four file name extensions listed below: </p><ul>
<li>
<p class="startli"><b>.hpp</b> A class header file ends in the suffix .hpp. The header file provides the class declaration. This file does not contain code for implementing the methods, except for the case of inline functions. Inline functions are to be placed at the bottom of the file with the keyword inline preceding the function name.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><b>.cpp</b> A class implementation file ends in the suffix .cpp. An implementation file contains the definitions of the members of the class.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><b>.h</b> A header file ends in the suffix .h. The header file contains information usually associated with procedures. Defined constants, data structures and function prototypes are typical elements of this file.</p>
<p class="endli"></p>
</li>
<li>
<b>.c</b> A procedure file ends in the suffix .c. The procedure file contains the actual procedures. </li>
</ul>
<h1><a class="anchor" id="StyleConventionsDox"></a>
Class Documentation Conventions</h1>
<p>Class documentation uses the doxygen tool available from <a href="http://www.doxygen.org">http://www.doxygen.org</a> and employs the JAVA-doc comment style. Brief comments appear in header files next to the attribute or function declaration. Detailed descriptions for functions should appear alongside their implementations (i.e., in the .cpp files for non-inlined, or in the headers next to the function definition for inlined). Detailed comments for a class or a class attribute must go in the header file as this is the only option.</p>
<p>NOTE: Previous class documentation utilities (class2frame and class2html) used the "//-" comment style and comment blocks such as this: </p><div class="fragment"><div class="line"><span class="comment">//- Class:       Model</span></div>
<div class="line"><span class="comment">//- Description: The model to be iterated by the Iterator.  </span></div>
<div class="line"><span class="comment">//-              Contains Variables, Interface, and Response objects.</span></div>
<div class="line"><span class="comment">//- Owner:       Mike Eldred</span></div>
<div class="line"><span class="comment">//- Version: $Id: Dev_Recomm_Pract.dox 4549 2007-09-20 18:25:03Z mseldre $</span></div>
</div><!-- fragment --><p>These tools are no longer used, so remaining comment blocks of this type are informational only and will not appear in the documentation generated by doxygen.</p>
<h1><a class="anchor" id="StyleConventionsCMake"></a>
CMake Style Guidelines</h1>
<p>Dakota conventions for CMake files, such as CMakeLists.txt, FooConfig.cmake, etc., follow. Our goal is ease of reading, maintenance, and support, similar to the C++ code itself. Current CMake versions and build hints are maintained at the Developer Portal <a href="http://dakota.sandia.gov/developer/">http://dakota.sandia.gov/developer/</a>.</p>
<h2><a class="anchor" id="StyleConventionsCMakeFormat"></a>
CMake Code Formatting</h2>
<ul>
<li>
Indentation is 2 spaces, consistent with Dakota C++ style. </li>
<li>
Lines should be kept to less than 80 chars per line where possible. </li>
<li>
Wrapped lines may be indented two spaces or aligned with prior lines. </li>
<li>
For ease of viewing and correctness checking in Emacs, a customization file is available: <a href="http://www.cmake.org/CMakeDocs/cmake-mode.el">http://www.cmake.org/CMakeDocs/cmake-mode.el</a> </li>
</ul>
<h2><a class="anchor" id="StyleConventionsCMakeVars"></a>
CMake Variable Naming Conventions</h2>
<p>These variable naming conventions are especially important for those that ultimately become preprocessor defines and affect compilation of source files.</p>
<ul>
<li>
Classic/core elements of the CMake language are set in lower_case, e.g., option, set, if, find_library. </li>
<li>
Static arguments to CMake functions and macros are set in UPPER_CASE, e.g. REQUIRED, NO_MODULE, QUIET. </li>
<li>
Minimize "global" variables, i.e., don't use 2 variables with the same meaning when one will do the job. </li>
<li>
<p class="startli">Feature toggling: when possible, use the "HAVE_&lt;pkg/feature&gt;" convention already in use by many CMake-enabled TPLs, e.g., </p><div class="fragment"><div class="line">$ grep HAVE_SYSTEM <a class="code" href="namespaceDakota.html">Dakota</a>/src/CMakeLists.txt</div>
<div class="line"> </div>
<div class="line">check_function_exists(system HAVE_SYSTEM)</div>
<div class="line"><span class="keywordflow">if</span>(HAVE_SYSTEM)</div>
<div class="line">  add_definitions(<span class="stringliteral">&quot;-DHAVE_SYSTEM&quot;</span>)</div>
<div class="line">endif(HAVE_SYSTEM)</div>
<div class="line"> </div>
<div class="line">$ grep HAVE_CONMIN <a class="code" href="namespaceDakota.html">Dakota</a>/src/CMakeLists.txt <a class="code" href="namespaceDakota.html">Dakota</a>/packages/CMakeLists.txt</div>
<div class="line"><a class="code" href="namespaceDakota.html">Dakota</a>/src/CMakeLists.txt:if(HAVE_CONMIN)</div>
<div class="line"><a class="code" href="namespaceDakota.html">Dakota</a>/src/CMakeLists.txt:endif(HAVE_CONMIN)</div>
<div class="line"><a class="code" href="namespaceDakota.html">Dakota</a>/packages/CMakeLists.txt:option(HAVE_CONMIN &quot;Build the CONMIN package.&quot; ON)</div>
<div class="line"><a class="code" href="namespaceDakota.html">Dakota</a>/packages/CMakeLists.txt:if(HAVE_CONMIN)</div>
<div class="line"><a class="code" href="namespaceDakota.html">Dakota</a>/packages/CMakeLists.txt:endif(HAVE_CONMIN)</div>
</div><!-- fragment --><p class="interli"></p>
<p class="endli"></p>
</li>
<li>
<p class="startli">When a variable/preprocessor macro could result in name clashes beyond Dakota scope, e.g., for library_mode users, consider prefixing the "HAVE_&lt;pkg&gt;" name with DAKOTA_, e.g. DAKOTA_HAVE_MPI. Currently, MPI is the only use case for such a variable in Dakota, but many examples can be found in the CMake Modules source, e.g. </p><div class="fragment"><div class="line">grep _HAVE_ &lt;cmake_prefix_dir&gt;/share/cmake-2.8/Modules<span class="comment">/*</span></div>
</div><!-- fragment --> <p class="endli"></p>
</li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<div class="ttc" id="anamespacedakota_html_a77b2775985ff72df0799f4fdbd53a270"><div class="ttname"><a href="namespacedakota.html#a77b2775985ff72df0799f4fdbd53a270">dakota::RealVector</a></div><div class="ttdeci">Teuchos::SerialDenseVector&lt; int, Real &gt; RealVector</div><div class="ttdoc">Dakota vector of reals.</div><div class="ttdef"><b>Definition:</b> util_data_types.hpp:62</div></div>
<div class="ttc" id="anamespacedakota_html_a4b04262b81aa7d31eb5d2f607e2a35de"><div class="ttname"><a href="namespacedakota.html#a4b04262b81aa7d31eb5d2f607e2a35de">dakota::Real</a></div><div class="ttdeci">double Real</div><div class="ttdoc">Dakota real floating point type.</div><div class="ttdef"><b>Definition:</b> util_data_types.hpp:58</div></div>
<div class="ttc" id="anamespaceDakota_html_acff531cb7537cad348ae92c039e02d99"><div class="ttname"><a href="namespaceDakota.html#acff531cb7537cad348ae92c039e02d99">Dakota::abort_handler</a></div><div class="ttdeci">void abort_handler(int code)</div><div class="ttdoc">global function which handles serial or parallel aborts</div><div class="ttdef"><b>Definition:</b> dakota_global_defs.cpp:86</div></div>
<div class="ttc" id="anamespaceDakota_html"><div class="ttname"><a href="namespaceDakota.html">Dakota</a></div><div class="ttdoc">The primary namespace for DAKOTA.</div><div class="ttdef"><b>Definition:</b> Dev_Main.dox:1</div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20
</small></address>
</body>
</html>
