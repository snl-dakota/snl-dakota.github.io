<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>sub_method_pointer &mdash; dakota  documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/dakota_theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/sandiaheaderlite.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../_static/documentation_options.js?v=5929fcd5"></script>
        <script src="../../_static/doctools.js?v=9a2dae69"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../../_static/copybutton.js?v=f281be69"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="iterator_servers" href="model-nested-sub_method_pointer-iterator_servers.html" />
    <link rel="prev" title="optional_interface_responses_pointer" href="model-nested-optional_interface_pointer-optional_interface_responses_pointer.html" /> 
  
  <meta name="sandia.approval_type" content="formal"/>
  <meta property="sandia.approved" content="SAND2025-05563O"/>
  <meta name="description" content="The Dakota project delivers both state-of-the-art research and robust, usable software for optimization and UQ."/>
  <meta name="keywords" content="Dakota, optimization, UQ, uncertainty quantification, parametric analysis, design exploration, model calibration, risk analysis"/>
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> dakota
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../setupdakota.html">Getting Started</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../usingdakota.html">Using Dakota</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../introduction/aboutdakota.html">About Dakota</a></li>
<li class="toctree-l2"><a class="reference internal" href="../introduction/helloworld.html">Dakota Beginner’s Tutorial</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples.html">Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../introduction/couplingtosimulations.html">Coupling Dakota to a Simulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../inputfile.html">Dakota Input File</a></li>
<li class="toctree-l2"><a class="reference internal" href="../running.html">Running Dakota</a></li>
<li class="toctree-l2"><a class="reference internal" href="../output.html">Dakota Output</a></li>
<li class="toctree-l2"><a class="reference internal" href="../studytypes.html">Study Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../topics.html">Topics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../advanced.html">Advanced Topics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../theory.html">Dakota Theory</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../reference.html">Keyword Reference</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="environment.html">environment</a></li>
<li class="toctree-l3"><a class="reference internal" href="method.html">method</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="model.html">model</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="model-id_model.html">id_model</a></li>
<li class="toctree-l4"><a class="reference internal" href="model-single.html">single</a></li>
<li class="toctree-l4"><a class="reference internal" href="model-surrogate.html">surrogate</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="model-nested.html">nested</a><ul class="current">
<li class="toctree-l5"><a class="reference internal" href="model-nested-optional_interface_pointer.html">optional_interface_pointer</a></li>
<li class="toctree-l5 current"><a class="current reference internal" href="#">sub_method_pointer</a><ul>
<li class="toctree-l6"><a class="reference internal" href="model-nested-sub_method_pointer-iterator_servers.html">iterator_servers</a></li>
<li class="toctree-l6"><a class="reference internal" href="model-nested-sub_method_pointer-iterator_scheduling.html">iterator_scheduling</a></li>
<li class="toctree-l6"><a class="reference internal" href="model-nested-sub_method_pointer-processors_per_iterator.html">processors_per_iterator</a></li>
<li class="toctree-l6"><a class="reference internal" href="model-nested-sub_method_pointer-primary_variable_mapping.html">primary_variable_mapping</a></li>
<li class="toctree-l6"><a class="reference internal" href="model-nested-sub_method_pointer-secondary_variable_mapping.html">secondary_variable_mapping</a></li>
<li class="toctree-l6"><a class="reference internal" href="model-nested-sub_method_pointer-primary_response_mapping.html">primary_response_mapping</a></li>
<li class="toctree-l6"><a class="reference internal" href="model-nested-sub_method_pointer-secondary_response_mapping.html">secondary_response_mapping</a></li>
<li class="toctree-l6"><a class="reference internal" href="model-nested-sub_method_pointer-identity_response_mapping.html">identity_response_mapping</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="model-active_subspace.html">active_subspace</a></li>
<li class="toctree-l4"><a class="reference internal" href="model-adapted_basis.html">adapted_basis</a></li>
<li class="toctree-l4"><a class="reference internal" href="model-random_field.html">random_field</a></li>
<li class="toctree-l4"><a class="reference internal" href="model-variables_pointer.html">variables_pointer</a></li>
<li class="toctree-l4"><a class="reference internal" href="model-responses_pointer.html">responses_pointer</a></li>
<li class="toctree-l4"><a class="reference internal" href="model-hierarchical_tagging.html">hierarchical_tagging</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="variables.html">variables</a></li>
<li class="toctree-l3"><a class="reference internal" href="interface.html">interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="responses.html">responses</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../usingdakotagui/usingdakotagui.html">Using Dakota GUI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../externaltools/externaltools.html">Using External Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../compiling/compiling.html">Compiling Dakota</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developingdakota/developingdakota.html">Developing Dakota</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../misc/misc.html">Miscellaneous</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">dakota</a>
      </nav>

	  <!-- SNL Lite header -->
	  <div class="snlheader-subsite--wrapper-default">
		<snlheader class="snlheader-subsite" role="snlbanner">
		  <div class="wrapper">
			<a href="https://www.sandia.gov/index.html">
			  <div class="logo-transparent"><p class="logo">Sandia National Laboratories</p></div>
			</a>
			<div class="nav-top">
			  <a class="visuallyhidden" name="mainnav"></a>
			  <div aria-label="main navigation" class="core-nav-transparent core-nav-transparent--visible" role="navigation">
				<ul role="navigation" class="secondary-links">
				  <li id="search-text-link">
					<a aria-label="Search" href="https://www.sandia.gov/search/">Search Sandia.gov</a>
				  </li>
				  <li id="directory-text-link">
					<a href="https://www.sandia.gov/directory.html" aria-expanded="false" aria-label="Site Directory">All Sandia Websites</a>
				  </li>
				</ul>
			  </div>
			</div>
		  </div> 
		</snlheader>
	  </div>	  

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../usingdakota.html">Using Dakota</a></li>
          <li class="breadcrumb-item"><a href="../reference.html">Keyword Reference</a></li>
          <li class="breadcrumb-item"><a href="model.html">model</a></li>
          <li class="breadcrumb-item"><a href="model-nested.html">nested</a></li>
      <li class="breadcrumb-item active">sub_method_pointer</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/usingdakota/reference/model-nested-sub_method_pointer.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="sub-method-pointer">
<span id="model-nested-sub-method-pointer"></span><h1>sub_method_pointer<a class="headerlink" href="#sub-method-pointer" title="Link to this heading"></a></h1>
<p>The <code class="docutils literal notranslate"><span class="pre">sub_method_pointer</span></code> specifies the method block for the sub-iterator</p>
<p><strong>Topics</strong></p>
<p>block_pointer</p>
<div class="toctree-wrapper compound">
</div>
<p><strong>Specification</strong></p>
<ul class="simple">
<li><p><em>Alias:</em> None</p></li>
<li><p><em>Arguments:</em> STRING</p></li>
</ul>
<p><strong>Child Keywords:</strong></p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Required/Optional</p></th>
<th class="head"><p>Description of
Group</p></th>
<th class="head"><p>Dakota Keyword</p></th>
<th class="head"><p>Dakota Keyword Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td colspan="2"><p>Optional</p></td>
<td><p><a class="reference external" href="model-nested-sub_method_pointer-iterator_servers.html">iterator_servers</a></p></td>
<td><p>Specify the number of iterator servers when
Dakota is run in parallel</p></td>
</tr>
<tr class="row-odd"><td colspan="2"><p>Optional</p></td>
<td><p><a class="reference external" href="model-nested-sub_method_pointer-iterator_scheduling.html">iterator_scheduling</a></p></td>
<td><p>Specify the scheduling of concurrent
iterators when Dakota is run in parallel</p></td>
</tr>
<tr class="row-even"><td colspan="2"><p>Optional</p></td>
<td><p><a class="reference external" href="model-nested-sub_method_pointer-processors_per_iterator.html">processors_per_iterator</a></p></td>
<td><p>Specify the number of processors per iterator
server when Dakota is run in parallel</p></td>
</tr>
<tr class="row-odd"><td colspan="2"><p>Optional</p></td>
<td><p><a class="reference external" href="model-nested-sub_method_pointer-primary_variable_mapping.html">primary_variable_mapping</a></p></td>
<td><p>Primary mappning of top-level variables to
sub-model variables</p></td>
</tr>
<tr class="row-even"><td colspan="2"><p>Optional</p></td>
<td><p><a class="reference external" href="model-nested-sub_method_pointer-secondary_variable_mapping.html">secondary_variable_mapping</a></p></td>
<td><p>Secondary mappning of top-level variables to
sub-model variables</p></td>
</tr>
<tr class="row-odd"><td colspan="2"><p>Optional</p></td>
<td><p><a class="reference external" href="model-nested-sub_method_pointer-primary_response_mapping.html">primary_response_mapping</a></p></td>
<td><p>Mapping of sub-method results to top-level
primary responses</p></td>
</tr>
<tr class="row-even"><td colspan="2"><p>Optional</p></td>
<td><p><a class="reference external" href="model-nested-sub_method_pointer-secondary_response_mapping.html">secondary_response_mapping</a></p></td>
<td><p>Mapping of sub-method results to top-level
secondary responses</p></td>
</tr>
<tr class="row-odd"><td colspan="2"><p>Optional</p></td>
<td><p><a class="reference external" href="model-nested-sub_method_pointer-identity_response_mapping.html">identity_response_mapping</a></p></td>
<td><p>Identity mapping of sub-method results to
top-level responses</p></td>
</tr>
</tbody>
</table>
<p><strong>Description</strong></p>
<p>The <code class="docutils literal notranslate"><span class="pre">sub_method_pointer</span></code> specifies the method block for the sub-iterator.</p>
<p>See <a class="reference internal" href="../topics/pointers.html#topic-block-pointer"><span class="std std-ref">Pointers</span></a> for details about pointers.</p>
<p>A nested model performs an evaluation (variables-to-responses mapping) by running a complete sub-iterator (i.e. method) to completion. The sub-iterator, which is specified using the <code class="docutils literal notranslate"><span class="pre">sub_method_pointer</span></code>, has its own model. This model, referred to here as the sub-model, possesses its own variables and responses. Prior to every execution of the sub-iterator, information about the nested model’s variables is injected into the sub-model’s variables. After the sub-iterator has completed, its results are passed back up to the nested model as responses.</p>
<p>Communication of variables information from a nested model to its sub-iterator, and in the opposite direction of sub-iterator results to nested model responses, is called mapping. (This mapping must not be confused with the variables-to-responses mapping that constitutes an evaluation.) Dakota allows considerable power and flexibility in how nested model mappings are performed. They are specified using four keywords: for the variables, <code class="docutils literal notranslate"><span class="pre">primary_variable_mapping</span></code> and <code class="docutils literal notranslate"><span class="pre">secondary_variable_mapping</span></code>; and for the responses, <code class="docutils literal notranslate"><span class="pre">primary_response_mapping</span></code> and <code class="docutils literal notranslate"><span class="pre">secondary_response_mapping</span></code>. They are described below.</p>
<p><em>Variable Mappings</em></p>
<p>In the variable mapping case, primary and secondary variable mapping specifications are used to map from the top-level variables into the sub-model variables. These mappings support three possibilities in any combination: (1) insertion of an active top-level variable value into an identified sub-model distribution parameter for an identified active sub-model variable, (2) insertion of an active top-level variable value into an identified active sub-model variable value, and (3) addition of an active top-level variable value as an inactive sub-model variable, augmenting the active sub-model variables.</p>
<p>For the variable mappings, the primary and secondary specifications are lists of strings that are used to target specific sub-model variables and their sub-parameters, respectively. The primary strings are matched to sub-model variable descriptors such as <code class="docutils literal notranslate"><span class="pre">'cdv_1'</span></code> (either user-supplied or default labels). The secondary strings are matched to random variable distribution parameters such as <code class="docutils literal notranslate"><span class="pre">cdv_1'</span></code>’mean’ or <code class="docutils literal notranslate"><span class="pre">mean'</span></code>’num_trials’ or design/state variable sub-parameters such as <code class="docutils literal notranslate"><span class="pre">num_trials'</span></code>’lower_bound’ or <code class="docutils literal notranslate"><span class="pre">lower_bound'</span></code>’upper_bound’.</p>
<p>An important limitation is that real-valued top-level variables must map to real-valued sub-model variables or real-valued sub-parameters, and integer-valued top-level variables must map to either integer-valued sub-model variables or integer-valued sub-parameters. However, as long as these real versus integer constraints are satisfied, mappings are free to cross variable types (design, aleatory uncertain, epistemic uncertain, state) and domain types (continuous, discrete).</p>
<p>Both <code class="docutils literal notranslate"><span class="pre">primary_variable_mapping</span></code> and <code class="docutils literal notranslate"><span class="pre">secondary_variable_mapping</span></code> specifications are optional, which is designed to support the following three possibilities:</p>
<ol class="arabic simple">
<li><p>If both primary and secondary variable mappings are specified, then an active top-level variable value will be inserted into the identified sub-parameter (the secondary mapping) for the identified sub-model variable (the primary mapping).</p></li>
<li><p>If a primary mapping is specified but a secondary mapping is not, then an active top-level variable value will be inserted into the identified sub-model variable value (the primary mapping).</p></li>
<li><p>If a primary mapping is not specified (corresponding secondary mappings, if specified, are ignored), then an active top-level variable value will be inserted into a corresponding sub-model variable, based on matching of variable types (e.g., top-level and sub-model variable specifications both allocate a set of ‘continuous_design’ variables which are active at the top level). Multiple sub-model variable types may be updated in this manner, provided that they are all active in the top-level variables. Since there is a direct variable correspondence for these default insertions, sub-model bounds and descriptors are also updated from the top-level bounds and labels in order to eliminate the need for redundant input file specifications. Thus, it is typical for the sub-model variables specification to only contain the minimal required information, such as the number of variables of each type, for these insertion targets. The sub-model must allocate enough space for each of the types that will accept default insertions, and the leading set of matching sub-model variables are updated (i.e., the sub-model may allocate more than needed and the trailing set will be unmodified).</p></li>
</ol>
<p>These different variable mapping possibilities may be used in any
combination by employing empty strings (‘’) for particular omitted
mappings (the number of strings in user-supplied primary and secondary
variable mapping specifications must equal the total number of active
top-level variables, including both continuous and discrete
types). The ordering of the active variables is the same as shown in
<code class="docutils literal notranslate"><span class="pre">dakota</span></code>.input.summary on subpage input_spec_summary and as
presented in the <code class="docutils literal notranslate"><a class="reference external" href="../../usingdakota/reference/variables.html"><span class="pre">variables</span></a></code> section of this manual.</p>
<p>Inactive nested model variables are treated differently from those in the active view. If inactive variables are present at the outer level, then the default type 3 mapping is used for these variables; that is, outer loop inactive variables are inserted into inner loop variables (active or inactive) based on matching of variable types, top-level bounds and labels are also propagated, the inner loop must allocate sufficient space to receive the outer loop values, and the leading subset within this inner loop allocation is updated. This capability is important for allowing nesting beyond two levels, since an active variable at the outer-most loop may become inactive at the next lower level, but still needs to be further propagated down to lower levels in the recursion.</p>
<p><em>Response Mappings</em></p>
<p>For the response mappings, the primary and secondary specifications determine how results from the completed sub-iterator are mapped into nested model responses. The response mapping defines a matrix which scales and combines the results from the inner loop into outer loop responses. Each row of the mapping corresponds to one outer loop response, and each column of the mapping corresponds to a result from the inner loop. The results returned from the sub-model are best thought of as forming a column vector; the nested model responses are then the dot-product of the mapping matrix and results vector. The number and type of results that are available and must be accounted for in the response mapping depends on the sub-iterator type:</p>
<p>optimization: the final objective function(s) and nonlinear constraints</p>
<p>nonlinear least squares: the final least squares terms and nonlinear constraints</p>
<p>aleatory uncertainty quantification (UQ): for each response function, a mean statistic, a standard deviation statistic, and all probability/reliability/generalized reliability/response level results for any user-specified <code class="docutils literal notranslate"><span class="pre">response_levels</span></code>, <code class="docutils literal notranslate"><span class="pre">probability_levels</span></code>, <code class="docutils literal notranslate"><span class="pre">reliability_levels</span></code>, and/or <code class="docutils literal notranslate"><span class="pre">gen_reliability_levels</span></code>, in that order.</p>
<p>epistemic and mixed aleatory/epistemic UQ using interval estimation methods: lower and upper interval bounds for each response function.</p>
<p>epistemic and mixed aleatory/epistemic UQ using evidence methods: for each response function, lower and upper interval bounds (belief and plausibility) for all probability/reliability/generalized reliability/response level results computed from any user-specified <code class="docutils literal notranslate"><span class="pre">response_levels</span></code>, <code class="docutils literal notranslate"><span class="pre">probability_levels</span></code>, <code class="docutils literal notranslate"><span class="pre">reliability_levels</span></code>, and/or <code class="docutils literal notranslate"><span class="pre">gen_reliability_levels</span></code>, in that order.
parameter studies and design of experiments: for optimization and least squares response data sets, the best solution found (lowest constraint violation if infeasible, lowest composite objective function if feasible). For generic response data sets, a best solution metric is not defined, so the sub-iterator response vector is empty in this case.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">primary_response_mapping</span></code> matrix maps sub-iterator results into top-level objective functions, least squares terms, or generic response functions, depending on the declared top-level response set. The <code class="docutils literal notranslate"><span class="pre">secondary_response_mapping</span></code> matrix maps sub-iterator results into top-level nonlinear inequality and equality constraints. Alternately, if all the responses of the sub-iterator are to be mapped one-to-one to the top-level nested model responses <code class="docutils literal notranslate"><a class="reference external" href="../../usingdakota/reference/model-nested-sub_method_pointer-identity_response_mapping.html"><span class="pre">identity_response_mapping</span></a></code> may be specified instead.</p>
<p><em>Summary</em></p>
<p>The nested model constructs admit a wide variety of multi-iterator, multi-model solution approaches. For example, optimization within optimization (for hierarchical multidisciplinary optimization), uncertainty quantification within uncertainty quantification (for second-order probability), uncertainty quantification within optimization (for optimization under uncertainty), and optimization within uncertainty quantification (for uncertainty of optima) are all supported, with and without surrogate model indirection. Several examples of nested model usage are provided in the Users Manual, most notably mixed epistemic-aleatory UQ, optimization under uncertainty (OUU), and surrogate-based UQ.</p>
<p><strong>Examples</strong></p>
<p>Two examples are provided to illustrate nested models. The first is a relatively simple case. Although it is somewhat contrived, it demonstrates several features of nested models. A step-by-step explanation is provided below.</p>
<div class="highlight-dakota notranslate"><div class="highlight"><pre><span></span><span class="k">environment</span>
  method_pointer &#39;opt&#39;

<span class="k">method</span>
  id_method &#39;opt&#39;
  asynch_pattern_search
  model_pointer &#39;outer_model&#39;
  output verbose

<span class="k">model</span>
  id_model &#39;outer_model&#39;
  variables_pointer &#39;outer_vars&#39;
  responses_pointer &#39;outer_resps&#39;
  nested
    sub_method_pointer &#39;UQ_method&#39;
      primary_variable_mapping &#39;x1&#39; &#39;x2&#39;
      secondary_variable_mapping &#39;mean&#39; &#39;mean&#39;
      primary_response_mapping  0 0 0.3 0 0 0.7

<span class="k">variables</span>
  id_variables &#39;outer_vars&#39;
    continuous_design 2
    descriptors &#39;x1_mean&#39; &#39;x2_mean&#39;
    lower_bounds -2.0 -2.0
    upper_bounds  2.0  2.0

<span class="k">responses</span>
  id_responses &#39;outer_resps&#39;
    objective_functions 1
    descriptors &#39;sum_p
    no_gradients
    no_hessians

<span class="k">method</span>
  id_method &#39;UQ_method&#39;
  sampling samples 30
  seed 1234
  model_pointer &#39;UQ_model&#39;
  probability_levels 0.9 0.9

<span class="k">model</span>
  id_model &#39;UQ_model&#39;
  single
  variables_pointer &#39;inner_vars&#39;
  responses_pointer &#39;inner_resps&#39;
  interface_pointer &#39;inf&#39;

<span class="k">variables</span>
  id_variables &#39;inner_vars&#39;
  normal_uncertain 2
  descriptors &#39;x1&#39; &#39;x2&#39;
  means 0.0 0.0
  std_deviations 1.0 1.0

<span class="k">responses</span>
  id_responses &#39;inner_resps&#39;
  response_functions 2
  descriptors &#39;f1&#39; &#39;f2&#39;
  no_gradients
  no_hessians

<span class="k">interface</span>
  id_interface &#39;inf&#39;
  direct
    analysis_drivers &#39;text_book&#39;
</pre></div>
</div>
<p>The example input is an ‘optimization under uncertainty’ or OUU. In an OUU, some
statistic of the simulation response is optimized. In this case, a weighted sum of the 90th
percentiles of two simulation responses from the <code class="docutils literal notranslate"><span class="pre">text_book</span></code> driver is being minimized.
The uncertainty in these responses is driven by uncertainty in the input variables, which
are normally distributed. The means of the uncertain variables are the design variables
in the optimization.</p>
<p>In Dakota, this is accomplished by nesting an uncertainty quantification method
( <code class="docutils literal notranslate"><a class="reference external" href="../../usingdakota/reference/method-sampling.html"><span class="pre">sampling</span></a></code>), which computes the 90th percentiles, within an optimizer
( <code class="docutils literal notranslate"><span class="pre">method-asynch_pattern_search</span></code>), which iteratively adjusts the variable means to minimize
the objective. For every evaluation requested by the optimizer, the design variables ( <code class="docutils literal notranslate"><span class="pre">x1_mean</span></code>
and <code class="docutils literal notranslate"><span class="pre">x2_mean</span></code> in the example) are inserted into the means of the uncertain variables ( <code class="docutils literal notranslate"><span class="pre">x1</span></code> and
<code class="docutils literal notranslate"><span class="pre">x2</span></code>), then the <code class="docutils literal notranslate"><span class="pre">,sampling</span></code> study is run to completion, and finally the resulting statistics for
the responses <code class="docutils literal notranslate"><span class="pre">f1</span></code> and <code class="docutils literal notranslate"><span class="pre">f2</span></code> are mapped into the responses <code class="docutils literal notranslate"><span class="pre">sum_p</span></code>.</p>
<p>It may be helpful to sketch out the relationships between blocks as indicated by their
various pointers in order to understand the nested structure of the study. The top-level
or outer method, <code class="docutils literal notranslate"><span class="pre">'opt'</span></code>, has a model named <code class="docutils literal notranslate"><span class="pre">opt',</span></code>’outer_model’. This model refers to
variables and responses blocks ( <code class="docutils literal notranslate"><span class="pre">'outer_vars'</span></code> and <code class="docutils literal notranslate"><span class="pre">outer_vars'</span></code>’outer_resps’) that are used by
the optimizer. The <code class="docutils literal notranslate"><span class="pre">'outer_model'</span></code> block also refers to a sub-method, <code class="docutils literal notranslate"><span class="pre">outer_model'</span></code>’UQ_method’ which
defines the UQ study and has its own model, which in turn possess variables, an interface, and
responses.</p>
<p>Next, note the primary and secondary variable mappings in <code class="docutils literal notranslate"><span class="pre">'outer_model'</span></code>, which
specify that the values of the active design variables <code class="docutils literal notranslate"><span class="pre">x1_mean</span></code> and <code class="docutils literal notranslate"><span class="pre">x2_mean</span></code> are to be
inserted into the means of the uncertain variables <code class="docutils literal notranslate"><span class="pre">x1</span></code> and <code class="docutils literal notranslate"><span class="pre">x2</span></code>.</p>
<p>The response mapping in <code class="docutils literal notranslate"><span class="pre">'outer_model'</span></code> is a matrix with a single row and six columns.
The single row corresponds to the number of responses in the outer method. As
described above, for each of our two sub-model responses, the <code class="docutils literal notranslate"><span class="pre">sampling</span></code> method returns
a mean, a standard deviation, and a single probability level in that order to the nested
model. There are a total of six results and accordingly six columns in the mapping matrix.
The coefficients 0.3 and 0.7 in the matrix result in a weighted sum of the 90th percentiles:</p>
<div class="math notranslate nohighlight">
\[sum\_p = 0.3*(90th\: percentile \:of \:f1) + 0.7*(90th\: percentile\: of\: f2)\]</div>
<p>&lt;hr&gt;
The next example is a fragment of an input file, showing only the nested model itself. It
illustrates more complex variable and response mappings.</p>
<div class="highlight-dakota notranslate"><div class="highlight"><pre><span></span>primary_variable_mapping  = &#39;&#39; &#39;&#39; &#39;X&#39;   &#39;Y&#39;
secondary_variable_mapping = &#39;&#39; &#39;&#39; &#39;mean&#39; &#39;mean&#39;
primary_response_mapping  = 1. 0. 0. 0. 0. 0. 0. 0. 0.
secondary_response_mapping = 0. 0. 0. 1. 3. 0. 0. 0. 0.
                             0. 0. 0. 0. 0. 0. 1. 3. 0.
</pre></div>
</div>
<p>The variable mappings correspond to 4 top-level variables, the first
two of which employ the default mappings from active top-level
variables to sub-model variables of the same type (option 3 above) and
the latter two of which are inserted into the mean distribution
parameters of sub-model variables <code class="docutils literal notranslate"><span class="pre">'X'</span></code> and <code class="docutils literal notranslate"><span class="pre">X'</span></code>’Y’ (option 1 above).</p>
<p>The response mappings define a 3 by 9 matrix corresponding to 9 inner
loop results and 3 outer loop response functions (one
primary response function and 2 secondary functions, such as one
objective and two constraints). Each row of the response mapping is a
vector which is multiplied (i.e, with a dot-product) against the 9
sub-iterator results to determine the outer loop function.</p>
<p>Consider again a UQ example with 3 response functions, each providing a mean,
a standard deviation, and one level mapping (if no level mappings are
specified, the responses would only have a mean and standard
deviation). The primary response mapping can be seen to extract the
first result from the inner loop, which would correspond to the mean of
the first response function. This mapped sub-iterator response
becomes a single objective function, least squares term, or generic
response function at the outer level, as dictated by the top-level
response specification. The secondary response mapping maps the
fourth sub-iterator result plus 3 times the fifth
sub-iterator result (mean plus 3 standard deviations) into
one top-level nonlinear constraint and the seventh sub-iterator
result plus 3 times the eighth sub-iterator result (mean plus 3 standard deviations)
into another top-level nonlinear constraint, where these top-level nonlinear
constraints may be inequality or equality, as dictated by the top-level response
specification.</p>
<p>Note that a common case is for each sub-iterator result to be mapped
to a unique outer loop response (for example, in the nested UQ case
where one wants to determine an interval on each inner loop
statistic). In these simple cases, the response mapping would define
an identity matrix and
<code class="docutils literal notranslate"><a class="reference external" href="../../usingdakota/reference/model-nested-sub_method_pointer-identity_response_mapping.html"><span class="pre">identity_response_mapping</span></a></code> may instead
be specified.</p>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="model-nested-optional_interface_pointer-optional_interface_responses_pointer.html" class="btn btn-neutral float-left" title="optional_interface_responses_pointer" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="model-nested-sub_method_pointer-iterator_servers.html" class="btn btn-neutral float-right" title="iterator_servers" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <!--
  <div role="contentinfo">
    <p>&#169; Copyright 2024, Sandia National Laboratories.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
  
  --> 

</footer>
        </div>
      </div>
	  
	  <div style="background-color: #0f0f0f;color:#fafafa;padding:20px">
	    <div>
		  <h2><em>Exceptional service in the national interest</em></h2>
		</div>
		<p>© 2023 National Technology and Engineering Solutions of Sandia, LLC. | <a href="https://www.sandia.gov/contact_us/index.html">Questions &amp; Comments</a> | <a href="https://www.sandia.gov/general/privacy-security/index.html">Privacy &amp; Security</a></p>
		<p><a href="http://energy.gov" rel="noopener noreferrer" target="_blank"><img alt="U.S. Department of Energy" longdesc="https://energy.gov" src="https://www.sandia.gov/_common/images/doe_logo_white.png" style="height:37px; width:140px"></a> <a href="http://nnsa.energy.gov/" rel="noopener noreferrer" target="_blank"> <img alt="National Nuclear Security Administration" longdesc="http://nnsa.gov" src="https://www.sandia.gov/_common/images/nnsa_logo_white.png" style="height:37px; width:116px"></a></p>
		<p><a href="https://www.sandia.gov">Sandia National Laboratories</a> is a multimission laboratory managed and operated by National Technology and Engineering Solutions of Sandia, LLC., a wholly owned subsidiary of Honeywell International, Inc., for the U.S. Department of Energy’s National Nuclear Security Administration under contract DE-NA-0003525.</p>
	  </div>	  	  
	  
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>