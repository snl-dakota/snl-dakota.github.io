<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Restarting Dakota &mdash; dakota  documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/dakota_theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/sandiaheaderlite.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../_static/documentation_options.js?v=5929fcd5"></script>
        <script src="../../_static/doctools.js?v=9a2dae69"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../../_static/copybutton.js?v=f281be69"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Dakota Output" href="../output.html" />
    <link rel="prev" title="Execution Phases" href="executionphases.html" /> 
  
  <meta name="sandia.approval_type" content="formal"/>
  <meta property="sandia.approved" content="SAND2025-05563O"/>
  <meta name="description" content="The Dakota project delivers both state-of-the-art research and robust, usable software for optimization and UQ."/>
  <meta name="keywords" content="Dakota, optimization, UQ, uncertainty quantification, parametric analysis, design exploration, model calibration, risk analysis"/>
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> dakota
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../setupdakota.html">Getting Started</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../usingdakota.html">Using Dakota</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../introduction/aboutdakota.html">About Dakota</a></li>
<li class="toctree-l2"><a class="reference internal" href="../introduction/helloworld.html">Dakota Beginner’s Tutorial</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples.html">Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../introduction/couplingtosimulations.html">Coupling Dakota to a Simulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../inputfile.html">Dakota Input File</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../running.html">Running Dakota</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="commandline.html">Command-Line Options</a></li>
<li class="toctree-l3"><a class="reference internal" href="runningexamples.html">Running Examples</a></li>
<li class="toctree-l3"><a class="reference internal" href="executionphases.html">Execution Phases</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Restarting Dakota</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#writing-restart-files">Writing Restart Files</a></li>
<li class="toctree-l4"><a class="reference internal" href="#reading-restart-files">Reading Restart Files</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#partially-reading-a-restart-file">Partially Reading a Restart File</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#appending-to-a-restart-file">Appending to a Restart File</a></li>
<li class="toctree-l4"><a class="reference internal" href="#working-with-multiple-restart-files">Working with Multiple Restart Files</a></li>
<li class="toctree-l4"><a class="reference internal" href="#how-it-works">How it Works</a></li>
<li class="toctree-l4"><a class="reference internal" href="#deep-dive-into-dakota-restart-format">Deep Dive into Dakota Restart Format</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../output.html">Dakota Output</a></li>
<li class="toctree-l2"><a class="reference internal" href="../studytypes.html">Study Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../topics.html">Topics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../advanced.html">Advanced Topics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../theory.html">Dakota Theory</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference.html">Keyword Reference</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../usingdakotagui/usingdakotagui.html">Using Dakota GUI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../externaltools/externaltools.html">Using External Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../compiling/compiling.html">Compiling Dakota</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developingdakota/developingdakota.html">Developing Dakota</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../misc/misc.html">Miscellaneous</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">dakota</a>
      </nav>

	  <!-- SNL Lite header -->
	  <div class="snlheader-subsite--wrapper-default">
		<snlheader class="snlheader-subsite" role="snlbanner">
		  <div class="wrapper">
			<a href="https://www.sandia.gov/index.html">
			  <div class="logo-transparent"><p class="logo">Sandia National Laboratories</p></div>
			</a>
			<div class="nav-top">
			  <a class="visuallyhidden" name="mainnav"></a>
			  <div aria-label="main navigation" class="core-nav-transparent core-nav-transparent--visible" role="navigation">
				<ul role="navigation" class="secondary-links">
				  <li id="search-text-link">
					<a aria-label="Search" href="https://www.sandia.gov/search/">Search Sandia.gov</a>
				  </li>
				  <li id="directory-text-link">
					<a href="https://www.sandia.gov/directory.html" aria-expanded="false" aria-label="Site Directory">All Sandia Websites</a>
				  </li>
				</ul>
			  </div>
			</div>
		  </div> 
		</snlheader>
	  </div>	  

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../usingdakota.html">Using Dakota</a></li>
          <li class="breadcrumb-item"><a href="../running.html">Running Dakota</a></li>
      <li class="breadcrumb-item active">Restarting Dakota</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/usingdakota/running/restart.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="restarting-dakota">
<span id="dakota-restart"></span><h1>Restarting Dakota<a class="headerlink" href="#restarting-dakota" title="Link to this heading"></a></h1>
<p>Dakota is often used to solve problems that require repeatedly running
computationally expensive simulation codes. In some cases you may want
to repeat an optimization study, but with a tighter final convergence
tolerance. This would be costly if the entire optimization analysis
had to be repeated.  Interruptions imposed by computer usage policies,
power outages, and system failures could also result in costly
delays. However, Dakota automatically records the variable and
response data from all function evaluations so that subsequent Dakota
executions can pick up where previous runs left off.</p>
<p>The Dakota restart file (“dakota.rst” by default) archives the
tabulated interface evaluations in a binary format. The primary
restart options for the <code class="docutils literal notranslate"><span class="pre">dakota</span></code> command are <code class="docutils literal notranslate"><span class="pre">-read_restart</span></code>,
<code class="docutils literal notranslate"><span class="pre">-write_restart</span></code>, and <code class="docutils literal notranslate"><span class="pre">-stop_restart</span></code>. Once written, a restart
file may also be processed using <a class="reference internal" href="../../externaltools/restartutility.html#dakota-restart-utility"><span class="std std-ref">The Dakota Restart Utility</span></a>.</p>
<section id="writing-restart-files">
<h2>Writing Restart Files<a class="headerlink" href="#writing-restart-files" title="Link to this heading"></a></h2>
<p>To write a restart file using a particular name, the
<code class="docutils literal notranslate"><span class="pre">-write_restart</span></code> command line option (may be abbreviated as <code class="docutils literal notranslate"><span class="pre">-w</span></code>)
is used:</p>
<div class="highlight-dakota notranslate"><div class="highlight"><pre><span></span>dakota -i dakota.in -write_restart my_restart_file
</pre></div>
</div>
<p>If no <code class="docutils literal notranslate"><span class="pre">-write_restart</span></code> specification is used, then Dakota will still write a restart file, but using the default name “dakota.rst” instead of a user-specified name.
To turn restart recording off, the user may select <code class="docutils literal notranslate"><a class="reference external" href="../../usingdakota/reference/interface-deactivate.html"><span class="pre">deactivate</span></a></code> <code class="docutils literal notranslate"><a class="reference external" href="../../usingdakota/reference/interface-deactivate-restart_file.html"><span class="pre">restart_file</span></a></code> in the <code class="docutils literal notranslate"><a class="reference external" href="../../usingdakota/reference/interface.html"><span class="pre">interface</span></a></code> specification. This can increase execution
speed and reduce disk storage requirements, but at the expense of a loss in the ability to recover and continue a run that terminates prematurely. This
option is not recommended when function evaluations are costly or prone to failure.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Using the <code class="docutils literal notranslate"><a class="reference external" href="../../usingdakota/reference/interface-deactivate.html"><span class="pre">deactivate</span></a></code>
<code class="docutils literal notranslate"><a class="reference external" href="../../usingdakota/reference/interface-deactivate-restart_file.html"><span class="pre">restart_file</span></a></code> specification will
result in a zero length restart file with the default name
“dakota.rst”, which can overwrite an exiting file.</p>
</div>
</section>
<section id="reading-restart-files">
<h2>Reading Restart Files<a class="headerlink" href="#reading-restart-files" title="Link to this heading"></a></h2>
<p>To restart Dakota from a restart file, the <code class="docutils literal notranslate"><span class="pre">-read_restart</span></code> command
line option (may be abbreviated as <code class="docutils literal notranslate"><span class="pre">-r</span></code>) is used:</p>
<div class="highlight-dakota notranslate"><div class="highlight"><pre><span></span>dakota -i dakota.in -read_restart my_restart_file
</pre></div>
</div>
<p>If no -read_restart specification is used, then Dakota will not read restart information from any file, i.e., the default is no restart processing.</p>
<section id="partially-reading-a-restart-file">
<h3>Partially Reading a Restart File<a class="headerlink" href="#partially-reading-a-restart-file" title="Link to this heading"></a></h3>
<p>To read in only a portion of a restart file, the -stop_restart control (may be abbreviated as -s) is used to specify the number of entries to be read from the database.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The specified integer stop value corresponds to the restart record
processing counter (as can be seen when using the print utility
(see <a class="reference internal" href="../../externaltools/restartutility.html#dakota-restart-utility"><span class="std std-ref">The Dakota Restart Utility</span></a>) which may differ from the
evaluation numbers used in the previous run if, for example, any
duplicates were detected (since these duplicates are not recorded
in the restart file).</p>
</div>
<p>In the case of a -stop_restart specification, it is usually
desirable to specify a new restart file using -write_restart so as to remove the records of erroneous or corrupted function evaluations. For example, to read in the first 50 evaluations from dakota.rst:</p>
<div class="highlight-dakota notranslate"><div class="highlight"><pre><span></span>dakota -i dakota.in -r dakota.rst -s 50 -w dakota_new.rst
</pre></div>
</div>
<p>The dakota_new.rst file will contain the 50 processed evaluations from dakota.rst as well as any new evaluations. All evaluations following the 50th in “dakota.rst”
have been removed from the latest restart record.</p>
</section>
</section>
<section id="appending-to-a-restart-file">
<h2>Appending to a Restart File<a class="headerlink" href="#appending-to-a-restart-file" title="Link to this heading"></a></h2>
<p>If the <code class="docutils literal notranslate"><span class="pre">-write_restart</span></code> and <code class="docutils literal notranslate"><span class="pre">-read_restart</span></code> specifications identify the same file (including the case where <code class="docutils literal notranslate"><span class="pre">-write_restart</span></code> is not specified and <code class="docutils literal notranslate"><span class="pre">-read_restart</span></code> identifies “dakota.rst”),
then new evaluations will be appended to the existing restart file.</p>
</section>
<section id="working-with-multiple-restart-files">
<h2>Working with Multiple Restart Files<a class="headerlink" href="#working-with-multiple-restart-files" title="Link to this heading"></a></h2>
<p>If the <code class="docutils literal notranslate"><span class="pre">-write_restart</span></code> and <code class="docutils literal notranslate"><span class="pre">-read_restart</span></code> specifications identify different files, then the evaluations read from the file identified by <code class="docutils literal notranslate"><span class="pre">-read_restart</span></code> are first written
to the <code class="docutils literal notranslate"><span class="pre">-write_restart</span></code> file. Any new evaluations are then appended to the <code class="docutils literal notranslate"><span class="pre">-write_restart</span></code> file. In this way, restart operations can be chained together indefinitely with the
assurance that all of the relevant evaluations are present in the latest restart file.</p>
</section>
<section id="how-it-works">
<h2>How it Works<a class="headerlink" href="#how-it-works" title="Link to this heading"></a></h2>
<p>Dakota’s restart algorithm relies on its duplicate detection capabilities. Processing a restart file populates the list of function evaluations that have been performed.
Then, when the study is restarted, it is started from the beginning (not a warm start) and many of the function evaluations requested by the iterator are intercepted by
the duplicate detection code. This approach has the primary advantage of restoring the complete state of the iteration (including the ability to correctly detect subsequent
duplicates) for all methods/iterators without the need for iterator-specific restart code. However, the possibility exists for numerical round-off error to cause a divergence
between the evaluations performed in the previous and restarted studies. This has been rare in practice.</p>
</section>
<section id="deep-dive-into-dakota-restart-format">
<h2>Deep Dive into Dakota Restart Format<a class="headerlink" href="#deep-dive-into-dakota-restart-format" title="Link to this heading"></a></h2>
<ul>
<li><p>The Dakota restart file (e.g., “dakota.rst”) is written in a binary format, leveraging the Boost.Serialization library. While the cross-platform portability
may not be as general as, say, the XDR standard, experience has shown it to be a sufficiently portable format to meet most users needs.</p></li>
<li><p>Caution should be exercised to ensure consistent endianness of the computer architectures involved when attempting to leverage the restart capability in a
multi-host environment. For example, if a little endian host is used to create the restart file, it can only be reliably ported and read on a host that is also
little endian.</p></li>
<li><p>By default, Dakota’s evaluation cache and restart capabilities are
based on strict binary equality. This provides a performance
advantage, as it permits a hash-based data structure to be used to
search the evaluation cache. Dakota 6.0 and newer have an additional
cache tolerance options to manage the function evaluation cache,
duplicate evaluation detection, and restart data file entries. In
the interface’s <code class="docutils literal notranslate"><a class="reference external" href="../../usingdakota/reference/interface-analysis_drivers.html"><span class="pre">analysis_drivers</span></a></code> it is possible
to provide additional deactivate parameters in the specification
block: <code class="docutils literal notranslate"><a class="reference external" href="../../usingdakota/reference/interface-deactivate.html"><span class="pre">deactivate</span></a></code>
<code class="docutils literal notranslate"><a class="reference external" href="../../usingdakota/reference/interface-deactivate-strict_cache_equality.html"><span class="pre">strict_cache_equality</span></a></code>, together with
an optional tolerance.  Their use may prevent cache misses, which
can occur when attempting to use a restart file on a machine
different from the one on which it was generated.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Relaxing strict cache equality should be considered judiciously,
on a case-by-case basis, since there will be a performance
penalty for the non-hashed evaluation cache lookups for detection
of duplicates. That said, there are situations in which it is
desirable to accept the performance hit of the slower cache
lookups (for example a computationally expensive analysis
driver).</p>
</div>
</li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="executionphases.html" class="btn btn-neutral float-left" title="Execution Phases" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../output.html" class="btn btn-neutral float-right" title="Dakota Output" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <!--
  <div role="contentinfo">
    <p>&#169; Copyright 2024, Sandia National Laboratories.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
  
  --> 

</footer>
        </div>
      </div>
	  
	  <div style="background-color: #0f0f0f;color:#fafafa;padding:20px">
	    <div>
		  <h2><em>Exceptional service in the national interest</em></h2>
		</div>
		<p>© 2023 National Technology and Engineering Solutions of Sandia, LLC. | <a href="https://www.sandia.gov/contact_us/index.html">Questions &amp; Comments</a> | <a href="https://www.sandia.gov/general/privacy-security/index.html">Privacy &amp; Security</a></p>
		<p><a href="http://energy.gov" rel="noopener noreferrer" target="_blank"><img alt="U.S. Department of Energy" longdesc="https://energy.gov" src="https://www.sandia.gov/_common/images/doe_logo_white.png" style="height:37px; width:140px"></a> <a href="http://nnsa.energy.gov/" rel="noopener noreferrer" target="_blank"> <img alt="National Nuclear Security Administration" longdesc="http://nnsa.gov" src="https://www.sandia.gov/_common/images/nnsa_logo_white.png" style="height:37px; width:116px"></a></p>
		<p><a href="https://www.sandia.gov">Sandia National Laboratories</a> is a multimission laboratory managed and operated by National Technology and Engineering Solutions of Sandia, LLC., a wholly owned subsidiary of Honeywell International, Inc., for the U.S. Department of Energy’s National Nuclear Security Administration under contract DE-NA-0003525.</p>
	  </div>	  	  
	  
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>