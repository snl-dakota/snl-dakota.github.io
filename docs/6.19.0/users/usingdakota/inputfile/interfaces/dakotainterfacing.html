<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Parameters and Results Using the Python dakota.interfacing module &mdash; dakota 6.19.0 documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/dakota_theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/sandiaheaderlite.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Responses" href="../responses.html" />
    <link rel="prev" title="Parameter to Response Mapping Examples" href="mappingexamples.html" /> 
  
  <meta name="sandia.approval_type" content="formal"/>
  <meta property="sandia.approved" content="SAND2023-13392 O"/>
  <meta name="description" content="The Dakota project delivers both state-of-the-art research and robust, usable software for optimization and UQ."/>
  <meta name="keywords" content="Dakota, optimization, UQ, uncertainty quantification, parametric analysis, design exploration, model calibration, risk analysis"/>
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../../index.html" class="icon icon-home"> dakota
            <img src="../../../_static/dakota_Arrow_Name_Tag_horiz_transparent.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                6.19
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../setupdakota.html">Getting Started</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../usingdakota.html">Using Dakota</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../introduction/aboutdakota.html">About Dakota</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../introduction/helloworld.html">Dakota Beginner’s Tutorial</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples.html">Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../introduction/couplingtosimulations.html">Coupling Dakota to a Simulation</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../inputfile.html">Dakota Input File</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../formatting.html">Input File Formatting</a></li>
<li class="toctree-l3"><a class="reference internal" href="../model.html">Models</a></li>
<li class="toctree-l3"><a class="reference internal" href="../variables.html">Variables</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../interfaces.html">Interfaces</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="simulationinterfaces.html">Simulation Interfaces</a></li>
<li class="toctree-l4"><a class="reference internal" href="buildingblackboxinterface.html">Building a Black-Box Interface to a Simulation Code</a></li>
<li class="toctree-l4"><a class="reference internal" href="simulationinterfacecomponents.html">Simulation Interface Components</a></li>
<li class="toctree-l4"><a class="reference internal" href="simulationfilemanagement.html">Simulation File Management</a></li>
<li class="toctree-l4"><a class="reference internal" href="batchedevaluations.html">Batched Evaluations</a></li>
<li class="toctree-l4"><a class="reference internal" href="mappingexamples.html">Parameter to Response Mapping Examples</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Parameters and Results Using the Python dakota.interfacing module</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#api">API</a></li>
<li class="toctree-l5"><a class="reference internal" href="#processing-templates">Processing Templates</a></li>
<li class="toctree-l5"><a class="reference internal" href="#dakota-interfacing-examples">dakota.interfacing Examples</a><ul>
<li class="toctree-l6"><a class="reference internal" href="#dakotaparams-and-dakotaresults">DakotaParams and DakotaResults</a></li>
<li class="toctree-l6"><a class="reference internal" href="#unicode-support">Unicode Support</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="#scripting">Scripting</a><ul>
<li class="toctree-l6"><a class="reference internal" href="#python-coding-tips">Python Coding Tips</a></li>
<li class="toctree-l6"><a class="reference internal" href="#conditionals">Conditionals</a></li>
<li class="toctree-l6"><a class="reference internal" href="#loops">Loops</a></li>
<li class="toctree-l6"><a class="reference internal" href="#lists">Lists</a></li>
<li class="toctree-l6"><a class="reference internal" href="#math-on-lists">Math on lists</a></li>
<li class="toctree-l6"><a class="reference internal" href="#strings">Strings</a></li>
<li class="toctree-l6"><a class="reference internal" href="#custom-functions">Custom Functions</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="#auxiliary-functions">Auxiliary Functions</a><ul>
<li class="toctree-l6"><a class="reference internal" href="#include">Include</a></li>
<li class="toctree-l6"><a class="reference internal" href="#immutable-and-mutable">Immutable and Mutable</a></li>
<li class="toctree-l6"><a class="reference internal" href="#print-all-variables">Print All Variables</a></li>
<li class="toctree-l6"><a class="reference internal" href="#set-global-numerical-format">Set Global Numerical Format</a></li>
<li class="toctree-l6"><a class="reference internal" href="#per-field-output-formatting">Per-field Output Formatting</a></li>
<li class="toctree-l6"><a class="reference internal" href="#defaults-and-undefined-parameters">Defaults and Undefined Parameters</a></li>
<li class="toctree-l6"><a class="reference internal" href="#mathematical-functions">Mathematical Functions</a></li>
<li class="toctree-l6"><a class="reference internal" href="#other-functions">Other Functions</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../responses.html">Responses</a></li>
<li class="toctree-l3"><a class="reference internal" href="../inputstodakota.html">Inputs to Dakota</a></li>
<li class="toctree-l3"><a class="reference internal" href="../inputspec.html">Dakota Input Spec</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../inputfile.html#video-resources">Video Resources</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../running.html">Running Dakota</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../output.html">Dakota Output</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../studytypes.html">Study Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../topics.html">Topics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../advanced.html">Advanced Topics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../theory.html">Dakota Theory</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../reference.html">Keyword Reference</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../usingdakotagui/usingdakotagui.html">Using Dakota GUI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../externaltools/externaltools.html">Using External Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../compiling/compiling.html">Compiling Dakota</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../developingdakota/developingdakota.html">Developing Dakota</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../misc/misc.html">Miscellaneous</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">dakota</a>
      </nav>

	  <!-- SNL Lite header -->
	  <div class="snlheader-subsite--wrapper-default">
		<snlheader class="snlheader-subsite" role="snlbanner">
		  <div class="wrapper">
			<a href="https://www.sandia.gov/index.html">
			  <div class="logo-transparent"><p class="logo">Sandia National Laboratories</p></div>
			</a>
			<div class="nav-top">
			  <a class="visuallyhidden" name="mainnav"></a>
			  <div aria-label="main navigation" class="core-nav-transparent core-nav-transparent--visible" role="navigation">
				<ul role="navigation" class="secondary-links">
				  <li id="search-text-link">
					<a aria-label="Search" href="https://www.sandia.gov/search/">Search Sandia.gov</a>
				  </li>
				  <li id="directory-text-link">
					<a href="https://www.sandia.gov/directory.html" aria-expanded="false" aria-label="Site Directory">All Sandia Websites</a>
				  </li>
				</ul>
			  </div>
			</div>
		  </div> 
		</snlheader>
	  </div>	  

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../../usingdakota.html">Using Dakota</a> &raquo;</li>
          <li><a href="../../inputfile.html">Dakota Input File</a> &raquo;</li>
          <li><a href="../interfaces.html">Interfaces</a> &raquo;</li>
      <li>Parameters and Results Using the Python dakota.interfacing module</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/usingdakota/inputfile/interfaces/dakotainterfacing.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="parameters-and-results-using-the-python-dakota-interfacing-module">
<span id="interfaces-dakota-interfacing"></span><h1>Parameters and Results Using the Python dakota.interfacing module<a class="headerlink" href="#parameters-and-results-using-the-python-dakota-interfacing-module" title="Permalink to this headline"></a></h1>
<p>The Python module <code class="docutils literal notranslate"><span class="pre">dakota.interfacing</span></code> provides a Python interface
to read and write Dakota parameters and results files, respectively.
Because of this, <code class="docutils literal notranslate"><span class="pre">dakota.interfacing</span></code> can greatly simplify
development of black-box interfaces. The benefit may be greatest when
one or more phases of the interface (pre-processing, execution,
post-processing) is written in Python.</p>
<p>The following sections describe the components of
<code class="docutils literal notranslate"><span class="pre">dakota.interfacing</span></code>. These components include:</p>
<ul class="simple">
<li><p>The <a class="reference internal" href="#Parameters" title="Parameters"><code class="xref py py-class docutils literal notranslate"><span class="pre">Parameters</span></code></a> class. Makes available the variable information
for a single evaluation</p></li>
<li><p>The <a class="reference internal" href="#Results" title="Results"><code class="xref py py-class docutils literal notranslate"><span class="pre">Results</span></code></a> class. Collects results for a single evaluation and
writes them to file</p></li>
<li><p>The <a class="reference internal" href="#BatchParameters" title="BatchParameters"><code class="xref py py-class docutils literal notranslate"><span class="pre">BatchParameters</span></code></a> and <a class="reference internal" href="#BatchResults" title="BatchResults"><code class="xref py py-class docutils literal notranslate"><span class="pre">BatchResults</span></code></a> classes. Containers for
multiple <a class="reference internal" href="#Parameters" title="Parameters"><code class="xref py py-class docutils literal notranslate"><span class="pre">Parameters</span></code></a> and <a class="reference internal" href="#Results" title="Results"><code class="xref py py-class docutils literal notranslate"><span class="pre">Results</span></code></a> objects; used when
evaluations are performed by Dakota in <a class="reference internal" href="batchedevaluations.html#interfaces-batch"><span class="std std-ref">batch mode</span></a>.</p></li>
<li><p>The <a class="reference internal" href="#read_parameters_file" title="read_parameters_file"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_parameters_file()</span></code></a> function. Constructs <a class="reference internal" href="#Parameters" title="Parameters"><code class="xref py py-class docutils literal notranslate"><span class="pre">Parameters</span></code></a>,
<a class="reference internal" href="#Results" title="Results"><code class="xref py py-class docutils literal notranslate"><span class="pre">Results</span></code></a>, <a class="reference internal" href="#BatchParameters" title="BatchParameters"><code class="xref py py-class docutils literal notranslate"><span class="pre">BatchParameters</span></code></a>, and <a class="reference internal" href="#BatchResults" title="BatchResults"><code class="xref py py-class docutils literal notranslate"><span class="pre">BatchResults</span></code></a> objects from a
Dakota parameters file.</p></li>
</ul>
<section id="api">
<h2>API<a class="headerlink" href="#api" title="Permalink to this headline"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="read_parameters_file">
<span class="sig-name descname"><span class="pre">read_parameters_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">parameters_file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">results_file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ignore_asv</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">infer_types</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">types</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#read_parameters_file" title="Permalink to this definition"></a></dt>
<dd><p>Creates <a class="reference internal" href="#Parameters" title="Parameters"><code class="xref py py-class docutils literal notranslate"><span class="pre">Parameters</span></code></a>, <a class="reference internal" href="#Results" title="Results"><code class="xref py py-class docutils literal notranslate"><span class="pre">Results</span></code></a>, <a class="reference internal" href="#BatchParameters" title="BatchParameters"><code class="xref py py-class docutils literal notranslate"><span class="pre">BatchParameters</span></code></a>, and <a class="reference internal" href="#BatchResults" title="BatchResults"><code class="xref py py-class docutils literal notranslate"><span class="pre">BatchResults</span></code></a> objects from a Dakota parameters file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>parameters_file</strong> – The names of the parameter file that is to be read.
The name can be an absolute or relative filepath, or just a filename.
If a parameters file is not provided, it will be obtained from the command line arguments.
(The parameters filename is assumed to be the first argument.)
Note that if the working directory has changed since script invocation,
filenames provided as command line arguments by Dakota’s <code class="docutils literal notranslate"><span class="pre">fork</span></code> or <code class="docutils literal notranslate"><span class="pre">system</span></code>
interfaces may be incorrect.</p></li>
<li><p><strong>results_file</strong> – The name of the results file that ultimately is to be
written. The name can be an absolute or relative filepaths, or just a filename.
If a results file is not provided, it will be obtained from the command line arguments.
(The results filename is assumed to be the second command line argument.) Note that
if the working directory has changed since script invocation, filenames provided
as command line arguments by Dakota’s <code class="docutils literal notranslate"><span class="pre">fork</span></code> or <code class="docutils literal notranslate"><span class="pre">system</span></code> interfaces may be incorrect.
If <em>results_file</em> is set to the constant <code class="docutils literal notranslate"><span class="pre">dakota.interfacing.UNNAMED</span></code>, the <a class="reference internal" href="#Results" title="Results"><code class="xref py py-class docutils literal notranslate"><span class="pre">Results</span></code></a>
or <a class="reference internal" href="#BatchResults" title="BatchResults"><code class="xref py py-class docutils literal notranslate"><span class="pre">BatchResults</span></code></a> object is constructed without a results file name. In this case, an
output stream must be provided when <a class="reference internal" href="#Results.write" title="Results.write"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Results.write()</span></code></a> or <a class="reference internal" href="#BatchResults.write" title="BatchResults.write"><code class="xref py py-meth docutils literal notranslate"><span class="pre">BatchResults.write()</span></code></a> is
called. Unnamed results files are most helpful when no results file will be written,
as with a script intended purely for pre-processing.</p></li>
<li><p><strong>ignore_asv</strong> – By default, the returned <a class="reference internal" href="#Results" title="Results"><code class="xref py py-class docutils literal notranslate"><span class="pre">Results</span></code></a> or <a class="reference internal" href="#BatchResults" title="BatchResults"><code class="xref py py-class docutils literal notranslate"><span class="pre">BatchResults</span></code></a> object enforces
the active set vector (see the <a class="reference internal" href="#Results" title="Results"><code class="xref py py-class docutils literal notranslate"><span class="pre">Results</span></code></a> class section). This behavior
can be overridden, allowing any property (function, gradient, Hessian)
of a response to be set, by setting this field to <code class="docutils literal notranslate"><span class="pre">True</span></code>. This option can be useful when
setting up or debugging a driver.</p></li>
<li><p><strong>batch</strong> – Must be set to <code class="docutils literal notranslate"><span class="pre">True</span></code> when batch evaluation has been requested in the Dakota input file, and <code class="docutils literal notranslate"><span class="pre">False</span></code> when not.</p></li>
<li><p><strong>infer_types</strong> – Controls how types are assigned to parameter values.  The values initially are read
as strings from the Dakota parameters file. If <code class="docutils literal notranslate"><span class="pre">infer_types</span></code> is <code class="docutils literal notranslate"><span class="pre">False</span></code> and <code class="docutils literal notranslate"><span class="pre">types</span></code> is <code class="docutils literal notranslate"><span class="pre">None</span></code>,
they remain as type <code class="docutils literal notranslate"><span class="pre">str</span></code>. If <code class="docutils literal notranslate"><span class="pre">infer_types</span></code> is <code class="docutils literal notranslate"><span class="pre">True</span></code>, an attempt is made to “guess” more
convenient types. Conversion first to <code class="docutils literal notranslate"><span class="pre">int</span></code> and then to <code class="docutils literal notranslate"><span class="pre">float</span></code> are tried. If both fail, the value remains a <code class="docutils literal notranslate"><span class="pre">str</span></code>.</p></li>
<li><p><strong>type</strong> – Controls how types are assigned to parameter values.  The values initially are read
as strings from the Dakota parameters file. If <code class="docutils literal notranslate"><span class="pre">infer_types</span></code> is <code class="docutils literal notranslate"><span class="pre">False</span></code> and <code class="docutils literal notranslate"><span class="pre">types</span></code> is <code class="docutils literal notranslate"><span class="pre">None</span></code>,
they remain as type <code class="docutils literal notranslate"><span class="pre">str</span></code>. If <code class="docutils literal notranslate"><span class="pre">infer_types</span></code> is <code class="docutils literal notranslate"><span class="pre">True</span></code>, an attempt is made to “guess” more
convenient types. Conversion first to <code class="docutils literal notranslate"><span class="pre">int</span></code> and then to <code class="docutils literal notranslate"><span class="pre">float</span></code> are tried. If both fail, the value remains a <code class="docutils literal notranslate"><span class="pre">str</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>For single, non-batch evaluation, it returns a tuple that contains (<a class="reference internal" href="#Parameters" title="Parameters"><code class="xref py py-class docutils literal notranslate"><span class="pre">Parameters</span></code></a>, <a class="reference internal" href="#Results" title="Results"><code class="xref py py-class docutils literal notranslate"><span class="pre">Results</span></code></a>). For batch
evaluations, it instead returns a tuple containing (<a class="reference internal" href="#BatchParameters" title="BatchParameters"><code class="xref py py-class docutils literal notranslate"><span class="pre">BatchParameters</span></code></a>, <a class="reference internal" href="#BatchResults" title="BatchResults"><code class="xref py py-class docutils literal notranslate"><span class="pre">BatchResults</span></code></a>).</p>
</dd>
</dl>
</dd></dl>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Sometimes automatic type inference does not work as desired; a user
may have a string-valued variable with the element “5”, for example,
that he does not want converted to an <code class="docutils literal notranslate"><span class="pre">int</span></code>. Or, a user may wish to
convert to a custom type, such as <code class="docutils literal notranslate"><span class="pre">np.float64</span></code> instead of the
built-in Python <code class="docutils literal notranslate"><span class="pre">float</span></code>. The <code class="docutils literal notranslate"><span class="pre">types</span></code> argument is useful in these
cases. It can be set either to a <code class="docutils literal notranslate"><span class="pre">list</span></code> of types or a <code class="docutils literal notranslate"><span class="pre">dict</span></code> that
maps variable labels to types. Types communicated using the <code class="docutils literal notranslate"><span class="pre">types</span></code>
argument override inferred types. If <code class="docutils literal notranslate"><span class="pre">types</span></code> is a list, it must have
a length equal to the number of variables. A dictionary, on the other
hand, need not contain types for every variable. This permits
variable-by-variable control over assignment and inference of types.</p>
</div>
<dl class="py class">
<dt class="sig sig-object py" id="Parameters">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">Parameters</span></span><a class="headerlink" href="#Parameters" title="Permalink to this definition"></a></dt>
<dd><blockquote>
<div><p><a class="reference internal" href="#Parameters" title="Parameters"><code class="xref py py-class docutils literal notranslate"><span class="pre">Parameters</span></code></a> objects make the variables, analysis components,
evaluation ID, and evaluation number read from a Dakota parameters file
available through a combination of key-value access and object
attributes. Although <a class="reference internal" href="#Parameters" title="Parameters"><code class="xref py py-class docutils literal notranslate"><span class="pre">Parameters</span></code></a> objects may be constructed directly,
it is advisable to use the <a class="reference internal" href="#read_parameters_file" title="read_parameters_file"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_parameters_file()</span></code></a> function instead.</p>
<p>Variable values can be accessed by Dakota descriptor or by index using
<code class="docutils literal notranslate"><span class="pre">[]</span></code> on the object itself. Variables types (integer, real, string) are
inferred by first attempting to convert to <code class="docutils literal notranslate"><span class="pre">int</span></code> and then, if this
fails, to <code class="docutils literal notranslate"><span class="pre">float</span></code>.</p>
<p>Variable values can be accessed by Dakota descriptor or by index using
<code class="docutils literal notranslate"><span class="pre">[]</span></code> on the object itself. Variables types are inferred or set as
described in the previous section.</p>
<p>Analysis components are accessible by index only using the <a class="reference internal" href="#Parameters.an_comps" title="Parameters.an_comps"><code class="xref py py-attr docutils literal notranslate"><span class="pre">an_comps</span></code></a>
attribute. Iterating over a <a class="reference internal" href="#Parameters" title="Parameters"><code class="xref py py-class docutils literal notranslate"><span class="pre">Parameters</span></code></a> object yields the variable
descriptors.</p>
</div></blockquote>
<dl class="py attribute">
<dt class="sig sig-object py" id="Parameters.an_comps">
<span class="sig-name descname"><span class="pre">an_comps</span></span><a class="headerlink" href="#Parameters.an_comps" title="Permalink to this definition"></a></dt>
<dd><p>List of the analysis components (strings).</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Parameters.eval_id">
<span class="sig-name descname"><span class="pre">eval_id</span></span><a class="headerlink" href="#Parameters.eval_id" title="Permalink to this definition"></a></dt>
<dd><p>Evaluation id (string).</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Parameters.eval_num">
<span class="sig-name descname"><span class="pre">eval_num</span></span><a class="headerlink" href="#Parameters.eval_num" title="Permalink to this definition"></a></dt>
<dd><p>Evaluation number (final token in eval_id) (int).</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Parameters.aprepro_format">
<span class="sig-name descname"><span class="pre">aprepro_format</span></span><a class="headerlink" href="#Parameters.aprepro_format" title="Permalink to this definition"></a></dt>
<dd><p>Boolean indicating whether the parameters file was in aprepro (True) or Dakota (False) format.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Parameters.descriptors">
<span class="sig-name descname"><span class="pre">descriptors</span></span><a class="headerlink" href="#Parameters.descriptors" title="Permalink to this definition"></a></dt>
<dd><p>List of the variable descriptors</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Parameters.num_variables">
<span class="sig-name descname"><span class="pre">num_variables</span></span><a class="headerlink" href="#Parameters.num_variables" title="Permalink to this definition"></a></dt>
<dd><p>Number of variables</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Parameters.num_an_comps">
<span class="sig-name descname"><span class="pre">num_an_comps</span></span><a class="headerlink" href="#Parameters.num_an_comps" title="Permalink to this definition"></a></dt>
<dd><p>Number of analysis components</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Parameters.metadata">
<span class="sig-name descname"><span class="pre">metadata</span></span><a class="headerlink" href="#Parameters.metadata" title="Permalink to this definition"></a></dt>
<dd><p>Names of requested metadata fields (strings)</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Parameters.num_metadata">
<span class="sig-name descname"><span class="pre">num_metadata</span></span><a class="headerlink" href="#Parameters.num_metadata" title="Permalink to this definition"></a></dt>
<dd><p>Number of requested metadata fields.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Parameters.items">
<span class="sig-name descname"><span class="pre">items</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Parameters.items" title="Permalink to this definition"></a></dt>
<dd><p>Return an iterator that yields tuples of the descriptor and value for each parameter. (<a class="reference internal" href="#Results" title="Results"><code class="xref py py-class docutils literal notranslate"><span class="pre">Results</span></code></a> objects also have <code class="docutils literal notranslate"><span class="pre">items()</span></code>.)</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Parameters.values">
<span class="sig-name descname"><span class="pre">values</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Parameters.values" title="Permalink to this definition"></a></dt>
<dd><p>Return an iterator that yields the value for each parameter. (<a class="reference internal" href="#Results" title="Results"><code class="xref py py-class docutils literal notranslate"><span class="pre">Results</span></code></a> objects have the corresponding method <code class="docutils literal notranslate"><span class="pre">responses()</span></code>.)</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="Results">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">Results</span></span><a class="headerlink" href="#Results" title="Permalink to this definition"></a></dt>
<dd><blockquote>
<div><p><a class="reference internal" href="#Results" title="Results"><code class="xref py py-class docutils literal notranslate"><span class="pre">Results</span></code></a> objects do the following:</p>
<ul class="simple">
<li><p>communicate response requests from Dakota (active set vector and
derivative variables)</p></li>
<li><p>collect response data (function values, gradients, and Hessians)</p></li>
<li><p>write Dakota results files</p></li>
</ul>
<p><a class="reference internal" href="#Results" title="Results"><code class="xref py py-class docutils literal notranslate"><span class="pre">Results</span></code></a> objects are collections of <a class="reference internal" href="#Response" title="Response"><code class="xref py py-class docutils literal notranslate"><span class="pre">Response</span></code></a> objects, which are
documented in the following section. Each <a class="reference internal" href="#Response" title="Response"><code class="xref py py-class docutils literal notranslate"><span class="pre">Response</span></code></a> can be accessed
by name (Dakota descriptor) or by index using <code class="docutils literal notranslate"><span class="pre">[]</span></code> on the <a class="reference internal" href="#Results" title="Results"><code class="xref py py-class docutils literal notranslate"><span class="pre">Results</span></code></a>
object itself. Iterating over a <a class="reference internal" href="#Results" title="Results"><code class="xref py py-class docutils literal notranslate"><span class="pre">Results</span></code></a> object yields the response
descriptors. Although <a class="reference internal" href="#Results" title="Results"><code class="xref py py-class docutils literal notranslate"><span class="pre">Results</span></code></a> objects may be constructed directly,
it is advisable to use the <a class="reference internal" href="#read_parameters_file" title="read_parameters_file"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_parameters_file()</span></code></a> function instead.</p>
</div></blockquote>
<dl class="py attribute">
<dt class="sig sig-object py" id="Results.eval_id">
<span class="sig-name descname"><span class="pre">eval_id</span></span><a class="headerlink" href="#Results.eval_id" title="Permalink to this definition"></a></dt>
<dd><p>Evaluation id (a string).</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Results.eval_num">
<span class="sig-name descname"><span class="pre">eval_num</span></span><a class="headerlink" href="#Results.eval_num" title="Permalink to this definition"></a></dt>
<dd><p>Evaluation number (final token in eval_id) (int).</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Results.aprepro_format">
<span class="sig-name descname"><span class="pre">aprepro_format</span></span><a class="headerlink" href="#Results.aprepro_format" title="Permalink to this definition"></a></dt>
<dd><p>Boolean indicating whether the parameters file was in aprepro (True) or Dakota (False) format.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Results.descriptors">
<span class="sig-name descname"><span class="pre">descriptors</span></span><a class="headerlink" href="#Results.descriptors" title="Permalink to this definition"></a></dt>
<dd><p>List of the response descriptors (strings)</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Results.num_responses">
<span class="sig-name descname"><span class="pre">num_responses</span></span><a class="headerlink" href="#Results.num_responses" title="Permalink to this definition"></a></dt>
<dd><p>Number of variables (read-only)</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Results.deriv_vars">
<span class="sig-name descname"><span class="pre">deriv_vars</span></span><a class="headerlink" href="#Results.deriv_vars" title="Permalink to this definition"></a></dt>
<dd><p>List of the derivative variables (strings)</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Results.num_deriv_vars">
<span class="sig-name descname"><span class="pre">num_deriv_vars</span></span><a class="headerlink" href="#Results.num_deriv_vars" title="Permalink to this definition"></a></dt>
<dd><p>Number of derivative variables (int)</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Results.items">
<span class="sig-name descname"><span class="pre">items</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Results.items" title="Permalink to this definition"></a></dt>
<dd><p>Return an iterator that yields tuples of the descriptor and <a class="reference internal" href="#Response" title="Response"><code class="xref py py-class docutils literal notranslate"><span class="pre">Response</span></code></a> object for each response. (<a class="reference internal" href="#Parameters" title="Parameters"><code class="xref py py-class docutils literal notranslate"><span class="pre">Parameters</span></code></a> objects also have <code class="docutils literal notranslate"><span class="pre">items()</span></code>.)</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Results.responses">
<span class="sig-name descname"><span class="pre">responses</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Results.responses" title="Permalink to this definition"></a></dt>
<dd><p>Return an iterator that yields the <a class="reference internal" href="#Response" title="Response"><code class="xref py py-class docutils literal notranslate"><span class="pre">Response</span></code></a> object for each response. (<a class="reference internal" href="#Parameters" title="Parameters"><code class="xref py py-class docutils literal notranslate"><span class="pre">Parameters</span></code></a> objects have the corresponding method <code class="docutils literal notranslate"><span class="pre">values()</span></code>.)</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Results.fail">
<span class="sig-name descname"><span class="pre">fail</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Results.fail" title="Permalink to this definition"></a></dt>
<dd><p>Set the FAIL attribute. When the results file is written, it will contain only the word FAIL, triggering <a class="reference internal" href="../../advanced/simulationfailurecapturing.html#failure"><span class="std std-ref">Dakota’s failure capturing behavior</span></a>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Results.write">
<span class="sig-name descname"><span class="pre">write</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">stream</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ignore_asv</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Results.write" title="Permalink to this definition"></a></dt>
<dd><p>Write the results to the Dakota results file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>stream</strong> – If <em>stream</em> is set, it overrides the results file name provided at construct time. It must be an open file-like object, rather than the name of a file.</p></li>
<li><p><strong>ignore_asv</strong> – If <em>ignore_asv</em> is True, the file will be written even if information requested via the active set vector is missing.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Calling <code class="docutils literal notranslate"><span class="pre">write()</span></code> on a <a class="reference internal" href="#Results" title="Results"><code class="xref py py-class docutils literal notranslate"><span class="pre">Results</span></code></a> object that was generated by reading a batch parameters file will raise a <code class="docutils literal notranslate"><span class="pre">BatchWriteError</span></code>.
Instead, <code class="docutils literal notranslate"><span class="pre">write()</span></code> should be called on the containing <a class="reference internal" href="#BatchResults" title="BatchResults"><code class="xref py py-class docutils literal notranslate"><span class="pre">BatchResults</span></code></a> object.</p>
</div>
<dl class="py class">
<dt class="sig sig-object py" id="Response">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">Response</span></span><a class="headerlink" href="#Response" title="Permalink to this definition"></a></dt>
<dd><blockquote>
<div><p><a class="reference internal" href="#Response" title="Response"><code class="xref py py-class docutils literal notranslate"><span class="pre">Response</span></code></a> objects store response information. They typically are instantiated and accessed through a Results object by index or response
descriptor using <code class="docutils literal notranslate"><span class="pre">[]</span></code>.</p>
</div></blockquote>
<dl class="py attribute">
<dt class="sig sig-object py" id="Response.asv">
<span class="sig-name descname"><span class="pre">asv</span></span><a class="headerlink" href="#Response.asv" title="Permalink to this definition"></a></dt>
<dd><p>A <a class="reference external" href="https://docs.python.org/3/library/collections.html#collections.namedtuple">named tuple</a> with three members, <em>function</em>, <em>gradient</em>,
and <em>hessian</em>. Each is a boolean indicating whether Dakota requested the associated information for the response.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Response.namedtuples">
<span class="sig-name descname"><span class="pre">namedtuples</span></span><a class="headerlink" href="#Response.namedtuples" title="Permalink to this definition"></a></dt>
<dd><p>These can be accessed by index or by member.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Response.function">
<span class="sig-name descname"><span class="pre">function</span></span><a class="headerlink" href="#Response.function" title="Permalink to this definition"></a></dt>
<dd><p>Function value for the response. A ResponseError is raised if Dakota did not request the function value (and ignore_asv is False).</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Response.gradient">
<span class="sig-name descname"><span class="pre">gradient</span></span><a class="headerlink" href="#Response.gradient" title="Permalink to this definition"></a></dt>
<dd><p>Gradient for the response. Gradients must be a 1D iterable of values that can be converted to floats, such as a <code class="docutils literal notranslate"><span class="pre">list</span></code> or 1D
<code class="docutils literal notranslate"><span class="pre">numpy</span> <span class="pre">array</span></code>. A ResponseError is raised if Dakota did not request the gradient (and ignore_asv is False), or if the number of elements
does not equal the number of derivative variables.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Response.hessian">
<span class="sig-name descname"><span class="pre">hessian</span></span><a class="headerlink" href="#Response.hessian" title="Permalink to this definition"></a></dt>
<dd><p>Hessian value for the response. Hessians must be an iterable of iterables (e.g. a 2D <code class="docutils literal notranslate"><span class="pre">numpy</span> <span class="pre">array</span></code> or list of lists). A ResponseError is
raised if Dakota did not request the Hessian (and ignore_asv is False), or if the dimension does not correspond correctly with the
number of derivative variables.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="BatchParameters">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">BatchParameters</span></span><a class="headerlink" href="#BatchParameters" title="Permalink to this definition"></a></dt>
<dd><blockquote>
<div><p><a class="reference internal" href="#BatchParameters" title="BatchParameters"><code class="xref py py-class docutils literal notranslate"><span class="pre">BatchParameters</span></code></a> objects are collections of <a class="reference internal" href="#Parameters" title="Parameters"><code class="xref py py-class docutils literal notranslate"><span class="pre">Parameters</span></code></a> objects. The individual <a class="reference internal" href="#Parameters" title="Parameters"><code class="xref py py-class docutils literal notranslate"><span class="pre">Parameters</span></code></a> objects can be accessed by index ([]) or
by iterating the <a class="reference internal" href="#BatchParameters" title="BatchParameters"><code class="xref py py-class docutils literal notranslate"><span class="pre">BatchParameters</span></code></a> object. Although <a class="reference internal" href="#BatchParameters" title="BatchParameters"><code class="xref py py-class docutils literal notranslate"><span class="pre">BatchParameters</span></code></a> objects may be constructed directly, it is advisable
to use the <a class="reference internal" href="#read_parameters_file" title="read_parameters_file"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_parameters_file()</span></code></a> function instead.</p>
</div></blockquote>
<dl class="py attribute">
<dt class="sig sig-object py" id="BatchParameters.batch_id">
<span class="sig-name descname"><span class="pre">batch_id</span></span><a class="headerlink" href="#BatchParameters.batch_id" title="Permalink to this definition"></a></dt>
<dd><p>The “id” of this batch of evaluations, reported by Dakota (string).</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="BatchResults">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">BatchResults</span></span><a class="headerlink" href="#BatchResults" title="Permalink to this definition"></a></dt>
<dd><blockquote>
<div><p><a class="reference internal" href="#BatchResults" title="BatchResults"><code class="xref py py-class docutils literal notranslate"><span class="pre">BatchResults</span></code></a> objects are collections of <a class="reference internal" href="#Results" title="Results"><code class="xref py py-class docutils literal notranslate"><span class="pre">Results</span></code></a> objects. The individual <a class="reference internal" href="#Results" title="Results"><code class="xref py py-class docutils literal notranslate"><span class="pre">Results</span></code></a> objects can be accessed by index ([]) or by
iterating the <a class="reference internal" href="#BatchResults" title="BatchResults"><code class="xref py py-class docutils literal notranslate"><span class="pre">BatchResults</span></code></a> object. Although <a class="reference internal" href="#BatchResults" title="BatchResults"><code class="xref py py-class docutils literal notranslate"><span class="pre">BatchResults</span></code></a> objects may be constructed directly, it is advisable to use the
<a class="reference internal" href="#read_parameters_file" title="read_parameters_file"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_parameters_file()</span></code></a> function instead.</p>
</div></blockquote>
<dl class="py attribute">
<dt class="sig sig-object py" id="BatchResults.batch_id">
<span class="sig-name descname"><span class="pre">batch_id</span></span><a class="headerlink" href="#BatchResults.batch_id" title="Permalink to this definition"></a></dt>
<dd><p>The “id” of this batch of evaluations, reported by Dakota (string)</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="BatchResults.write">
<span class="sig-name descname"><span class="pre">write</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">stream</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ignore_asv</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#BatchResults.write" title="Permalink to this definition"></a></dt>
<dd><p>Write results for all evaluations to the Dakota results file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>stream</strong> – If <em>stream</em> is set, it overrides the results file name
provided at construct time. It must be an open file-like object,
rather than the name of a file.</p></li>
<li><p><strong>ignore_asv</strong> – If <em>ignore_asv</em> is True, the file will be written even
if information requested via the active set vector is missing.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="processing-templates">
<h2>Processing Templates<a class="headerlink" href="#processing-templates" title="Permalink to this headline"></a></h2>
<p>Dakota is packaged with a sophisticated command-line template processor
called <a class="reference internal" href="../../../externaltools/dpreproandpyprepro.html#interfaces-dprepro-and-pyprepro"><span class="std std-ref">dprepro</span></a>. Templates may be
processed within Python analysis drivers without externally invoking
<code class="docutils literal notranslate"><span class="pre">dprepro</span></code> by calling the <code class="docutils literal notranslate"><span class="pre">dprepro</span></code> function:</p>
<dl class="py function">
<dt class="sig sig-object py" id="dprepro">
<span class="sig-name descname"><span class="pre">dprepro</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">template</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parameters=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">results=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fmt='%0.10g'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">code='%'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">code</span> <span class="pre">block='{%</span> <span class="pre">%}'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inline='{</span> <span class="pre">}'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">warn=True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dprepro" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<p>If <em>template</em> is a string, it is assumed to contain a template. If it is
a file-like object (that has a <code class="docutils literal notranslate"><span class="pre">.read()</span></code> method), the template will be
read from it. (Templates that are already in string form can be passed
in by first wrapping them in a <a class="reference external" href="https://docs.python.org/3/library/io.html?highlight=stringio#io.StringIO">StringIO</a>
object.)</p>
<p><a class="reference internal" href="#Parameters" title="Parameters"><code class="xref py py-class docutils literal notranslate"><span class="pre">Parameters</span></code></a> and <a class="reference internal" href="#Results" title="Results"><code class="xref py py-class docutils literal notranslate"><span class="pre">Results</span></code></a></p>
<p><a class="reference internal" href="#Parameters" title="Parameters"><code class="xref py py-class docutils literal notranslate"><span class="pre">Parameters</span></code></a> and <a class="reference internal" href="#Results" title="Results"><code class="xref py py-class docutils literal notranslate"><span class="pre">Results</span></code></a> objects can be made available to the
template using The <em>parameters</em> and <em>results</em> keyword arguments, and
additional variable definitions can be provided in a <code class="docutils literal notranslate"><span class="pre">dict</span></code> via the
<em>include</em> argument.</p>
<p>The <em>output</em> keyword is used to specify an output file for the processed
template. <em>output=None</em> causes the output to be returned as a string. A
string is interpreted as a file name, and a file-like object (that has a
<code class="docutils literal notranslate"><span class="pre">.write()</span></code> method) is written to.</p>
<p>The <em>fmt</em> keyword sets the global numerical format for template output.</p>
<p><em>code</em>, <em>code_block</em>, and <em>inline</em> are used to specify custom delimiters
for these three types of expressions within the template.</p>
<p>Finally, the <em>warn</em> keyword controls whether warnings are printed by the
template engine.</p>
</section>
<section id="dakota-interfacing-examples">
<h2>dakota.interfacing Examples<a class="headerlink" href="#dakota-interfacing-examples" title="Permalink to this headline"></a></h2>
<p>In addition to those in this section, the
<code class="docutils literal notranslate"><span class="pre">dakota/share/dakota/examples/official/drivers/Python/di</span></code>
folder contains a runnable
example of a Python analysis driver. This example demonstrates the
<code class="docutils literal notranslate"><span class="pre">dakota.interfacing</span></code> module.</p>
<p>For most applications, using <code class="docutils literal notranslate"><span class="pre">dakota.interfacing</span></code> is straightforward.
The first example, in <a class="reference internal" href="#diexample-simple"><span class="std std-numref">Listing 20</span></a>,
is a mock analysis driver. Two variables with the descriptors <code class="docutils literal notranslate"><span class="pre">x1</span></code> and
<code class="docutils literal notranslate"><span class="pre">x2</span></code> are read from the Dakota parameters file and used to evaluate the
fictitious user function <code class="docutils literal notranslate"><span class="pre">applic_module.run()</span></code>. The result, stored in
<code class="docutils literal notranslate"><span class="pre">f</span></code>, is assigned to the <code class="docutils literal notranslate"><span class="pre">function</span></code> value of the appropriate
response. (A common error is leaving off the <code class="docutils literal notranslate"><span class="pre">function</span></code> attribute,
which is needed to distinguish the function value of the response from
its gradient and Hessian.)</p>
<div class="literal-block-wrapper docutils container" id="diexample-simple">
<div class="code-block-caption"><span class="caption-number">Listing 20 </span><span class="caption-text">A simple analysis driver that uses <cite>dakota.interfacing</cite>.</span><a class="headerlink" href="#diexample-simple" title="Permalink to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">dakota.interfacing</span> <span class="k">as</span> <span class="nn">di</span>
<span class="kn">import</span> <span class="nn">applic_module</span> <span class="c1"># fictitious application</span>

<span class="n">params</span><span class="p">,</span> <span class="n">results</span> <span class="o">=</span> <span class="n">di</span><span class="o">.</span><span class="n">read_parameters_file</span><span class="p">()</span>

<span class="c1"># parameters can be accessed by descriptor, as shown here, or by index</span>
<span class="n">x1</span> <span class="o">=</span> <span class="n">params</span><span class="p">[</span><span class="s2">&quot;x1&quot;</span><span class="p">]</span>
<span class="n">x2</span> <span class="o">=</span> <span class="n">params</span><span class="p">[</span><span class="s2">&quot;x2&quot;</span><span class="p">]</span>

<span class="n">f</span> <span class="o">=</span> <span class="n">applic_module</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">x1</span><span class="p">,</span><span class="n">x2</span><span class="p">)</span>

<span class="c1"># Responses also can be accessed by descriptor or index</span>
<span class="n">results</span><span class="p">[</span><span class="s2">&quot;f&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">function</span> <span class="o">=</span> <span class="n">f</span>
<span class="n">results</span><span class="o">.</span><span class="n">write</span><span class="p">()</span>
</pre></div>
</div>
</div>
<p>The <a class="reference internal" href="#Results" title="Results"><code class="xref py py-class docutils literal notranslate"><span class="pre">Results</span></code></a> object exposes the active set vector read from the
parameters file. When analytic gradients or Hessians are available for
a response, the ASV should be queried to determine what Dakota has
requested for an evaluation. If an attempt is made to add unrequested
information to a response, a <code class="docutils literal notranslate"><span class="pre">dakota.interface.ResponseError</span></code> is
raised. The same exception results if a requested piece of information
is missing when <code class="docutils literal notranslate"><span class="pre">Results.write()</span></code> is called. The
<code class="docutils literal notranslate"><span class="pre">ignore_asv</span></code> option to <code class="docutils literal notranslate"><span class="pre">read_parameters_file</span></code> and
<code class="docutils literal notranslate"><span class="pre">Results.write()</span></code> overrides ASV checks.</p>
<p>In <a class="reference internal" href="#diexample-asv"><span class="std std-numref">Listing 21</span></a>, <code class="docutils literal notranslate"><span class="pre">applic_module.run()</span></code>
has been modified to return not only the function value of <code class="docutils literal notranslate"><span class="pre">f</span></code>, but
also its gradient and Hessian. The <code class="docutils literal notranslate"><span class="pre">asv</span></code> attribute is examined to
determine which of these to add to <code class="docutils literal notranslate"><span class="pre">results[&quot;f&quot;]</span></code>.</p>
<div class="literal-block-wrapper docutils container" id="diexample-asv">
<div class="code-block-caption"><span class="caption-number">Listing 21 </span><span class="caption-text">Examining the active set vector</span><a class="headerlink" href="#diexample-asv" title="Permalink to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">dakota.interfacing</span> <span class="k">as</span> <span class="nn">di</span>
<span class="kn">import</span> <span class="nn">applic_module</span> <span class="c1"># fictitious application</span>

<span class="n">params</span><span class="p">,</span> <span class="n">results</span> <span class="o">=</span> <span class="n">di</span><span class="o">.</span><span class="n">read_parameters_file</span><span class="p">()</span>

<span class="n">x1</span> <span class="o">=</span> <span class="n">params</span><span class="p">[</span><span class="s2">&quot;x1&quot;</span><span class="p">]</span>
<span class="n">x2</span> <span class="o">=</span> <span class="n">params</span><span class="p">[</span><span class="s2">&quot;x2&quot;</span><span class="p">]</span>

<span class="n">f</span><span class="p">,</span> <span class="n">df</span><span class="p">,</span> <span class="n">df2</span> <span class="o">=</span> <span class="n">applic_module</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">x1</span><span class="p">,</span><span class="n">x2</span><span class="p">)</span>

<span class="k">if</span> <span class="n">Results</span><span class="o">.</span><span class="n">asv</span><span class="o">.</span><span class="n">function</span><span class="p">:</span>
    <span class="n">results</span><span class="p">[</span><span class="s2">&quot;f&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">function</span> <span class="o">=</span> <span class="n">f</span>
<span class="k">if</span> <span class="n">Results</span><span class="o">.</span><span class="n">asv</span><span class="o">.</span><span class="n">gradient</span><span class="p">:</span>
    <span class="n">results</span><span class="p">[</span><span class="s2">&quot;f&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">gradient</span> <span class="o">=</span> <span class="n">df</span>
<span class="k">if</span> <span class="n">Results</span><span class="o">.</span><span class="n">asv</span><span class="o">.</span><span class="n">hessian</span><span class="p">:</span>
    <span class="n">results</span><span class="p">[</span><span class="s2">&quot;f&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">hessian</span> <span class="o">=</span> <span class="n">df2</span>

<span class="n">results</span><span class="o">.</span><span class="n">write</span><span class="p">()</span>
</pre></div>
</div>
</div>
<p>As of the 6.16 release, the direct Python interface can interoperate with
<code class="docutils literal notranslate"><span class="pre">dakota.interfacing</span></code> using a feature of Python known as a decorator.
Instead of receiving parameters from the Dakota parameters file and
writing results to the results file as in Figure~ref{diexample:asv},
the decorated Python driver works with the Python dictionary passed from
the direct Python interface.  An example of the decorator syntax and use
of the <code class="docutils literal notranslate"><span class="pre">dakota.interfacing</span></code> <a class="reference internal" href="#Parameters" title="Parameters"><code class="xref py py-class docutils literal notranslate"><span class="pre">Parameters</span></code></a> and <a class="reference internal" href="#Results" title="Results"><code class="xref py py-class docutils literal notranslate"><span class="pre">Results</span></code></a>
objects that get created automatically from the direct interface
Python dictionary is shown in <a class="reference internal" href="#linkeddiexample-decorator"><span class="std std-numref">Listing 22</span></a>.  The
complete driver including details of the packing functions can be found in
the <code class="docutils literal notranslate"><span class="pre">dakota/share/dakota/examples/official/drivers/Python/linked_di</span></code> folder.</p>
<div class="literal-block-wrapper docutils container" id="linkeddiexample-decorator">
<div class="code-block-caption"><span class="caption-number">Listing 22 </span><span class="caption-text">Decorated direct Python callback function using
<a class="reference internal" href="#Parameters" title="Parameters"><code class="xref py py-class docutils literal notranslate"><span class="pre">Parameters</span></code></a> and <a class="reference internal" href="#Results" title="Results"><code class="xref py py-class docutils literal notranslate"><span class="pre">Results</span></code></a> objects
constructed by the <code class="docutils literal notranslate"><span class="pre">dakota.interfacing</span></code> decorator</span><a class="headerlink" href="#linkeddiexample-decorator" title="Permalink to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">textbook</span> <span class="kn">import</span> <span class="n">textbook_list</span>
<span class="kn">import</span> <span class="nn">dakota.interfacing</span> <span class="k">as</span> <span class="nn">di</span>

<span class="nd">@di</span><span class="o">.</span><span class="n">python_interface</span>
<span class="k">def</span> <span class="nf">decorated_driver</span><span class="p">(</span><span class="n">params</span><span class="p">,</span> <span class="n">results</span><span class="p">):</span>

    <span class="n">textbook_input</span> <span class="o">=</span> <span class="n">pack_textbook_parameters</span><span class="p">(</span><span class="n">params</span><span class="p">,</span> <span class="n">results</span><span class="p">)</span>
    <span class="n">fns</span><span class="p">,</span> <span class="n">grads</span><span class="p">,</span> <span class="n">hessians</span> <span class="o">=</span> <span class="n">textbook_list</span><span class="p">(</span><span class="n">textbook_input</span><span class="p">)</span>
    <span class="n">results</span> <span class="o">=</span> <span class="n">pack_dakota_results</span><span class="p">(</span><span class="n">fns</span><span class="p">,</span> <span class="n">grads</span><span class="p">,</span> <span class="n">hessians</span><span class="p">,</span> <span class="n">results</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">results</span>
</pre></div>
</div>
</div>
<section id="dakotaparams-and-dakotaresults">
<span id="interfaces-params-and-results"></span><h3>DakotaParams and DakotaResults<a class="headerlink" href="#dakotaparams-and-dakotaresults" title="Permalink to this headline"></a></h3>
<p>If the <code class="docutils literal notranslate"><span class="pre">dakota</span></code> <a class="reference internal" href="#interfaces-dakota-interfacing"><span class="std std-ref">Python package</span></a> is available for
import (e.g. has been added to the <code class="docutils literal notranslate"><span class="pre">PYTHONPATH</span></code>), then <code class="docutils literal notranslate"><span class="pre">dprepro</span></code>
generates <a class="reference internal" href="#Parameters" title="Parameters"><code class="xref py py-class docutils literal notranslate"><span class="pre">Parameters</span></code></a> and <a class="reference internal" href="#Results" title="Results"><code class="xref py py-class docutils literal notranslate"><span class="pre">Results</span></code></a> objects from the Dakota
parameters file. These are available for use in templates under the
names <code class="docutils literal notranslate"><span class="pre">DakotaParams</span></code> and <code class="docutils literal notranslate"><span class="pre">DakotaResults</span></code>.</p>
<p>Use of these objects permits convenient access to information such as
the evaluation ID (<code class="docutils literal notranslate"><span class="pre">DakotaParams.eval_id</span></code>) and the active set vector
entries (<code class="docutils literal notranslate"><span class="pre">DakotaResults[0].asv.function</span></code>). Dakota variables also
become available not only directly within the template, but as members
of <code class="docutils literal notranslate"><span class="pre">DakotaParams</span></code>. That is, if <code class="docutils literal notranslate"><span class="pre">x1</span></code> is a Dakota variable, it will be
available within a template both by the name <code class="docutils literal notranslate"><span class="pre">x1</span></code>, and as
<code class="docutils literal notranslate"><span class="pre">DakotaParams[&quot;x1&quot;]</span></code>. In this way, variables that have prohibited
names (explained in the following section) can still be accessed using
their original names.</p>
</section>
<section id="unicode-support">
<span id="interfaces-unicode"></span><h3>Unicode Support<a class="headerlink" href="#unicode-support" title="Permalink to this headline"></a></h3>
<p>Variables must obey the naming conventions for the version of Python
that is used to run <code class="docutils literal notranslate"><span class="pre">d/pyprepro</span></code>. For Python 2, only ASCII
alphanumeric characters and the underscore are permitted, and
identifiers must not begin with a number. In Python 3, this requirement
is relaxed considerably, and many Unicode characters are permitted in
identifiers.</p>
<p>Because Dakota itself has few such restrictions on variable names,
<code class="docutils literal notranslate"><span class="pre">d/pyprepro</span></code> “mangles” noncompliant names in the following ways before
making them available in templates:</p>
<ul class="simple">
<li><p>Variables/parameters that begin with a number are prepended by the
lowercase letter ’i’.</p></li>
<li><p>Disallowed characters such as # are replaced by underscores (<code class="docutils literal notranslate"><span class="pre">_</span></code>).</p></li>
<li><p>In Python 2, non-ASCII letters are normalized to their rough ASCII
equivalents (e.g. ñ is replaced by n).</p></li>
</ul>
<p>As stated in the previous section, when using <code class="docutils literal notranslate"><span class="pre">dprepro</span></code> with
<code class="docutils literal notranslate"><span class="pre">dakota.interfacing</span></code>, the original variable names are always available
via the <code class="docutils literal notranslate"><span class="pre">DakotaParams</span></code> object.</p>
</section>
</section>
<section id="scripting">
<span id="interfaces-scripting"></span><h2>Scripting<a class="headerlink" href="#scripting" title="Permalink to this headline"></a></h2>
<p>The language of <code class="docutils literal notranslate"><span class="pre">pyprepro</span></code> and <code class="docutils literal notranslate"><span class="pre">dprepro</span></code> templates is Python with a
single modification: In normal Python, indentation delineates blocks of
code. However, in <code class="docutils literal notranslate"><span class="pre">d/pyprepro</span></code> templates, indentation is ignored and
blocks must end with an <code class="docutils literal notranslate"><span class="pre">end</span></code> statement whether they are part of
multi-line code (<code class="docutils literal notranslate"><span class="pre">{% %}</span></code>) or part of single line operation (<code class="docutils literal notranslate"><span class="pre">%</span></code>).</p>
<p>Users unfamiliar with Python, but who do have experience with other
scripting languages such as MATLAB, should find it straightforward to
incorporate simple Python scripts into their templates. A brief guide in
basic Python programming follows. Interested users should consult any of
the many available Python tutorials and guides for more advanced usage.</p>
<section id="python-coding-tips">
<span id="interfaces-python-coding-tips"></span><h3>Python Coding Tips<a class="headerlink" href="#python-coding-tips" title="Permalink to this headline"></a></h3>
<p>Here are a few characteristics of Python that may be important to note
by users familiar with other languages.</p>
<ul class="simple">
<li><p>Lists (array-like containers) are zero-based</p></li>
<li><p>Exponentiation is double <code class="docutils literal notranslate"><span class="pre">**</span></code>. Example: <code class="docutils literal notranslate"><span class="pre">x**y</span></code> (“x to the y”)</p></li>
<li><p>In many languages, blocks of code such as the bodies of loops,
functions, or conditional statements, are enclosed in symbols such as
{ }. In ordinary Python, statements that initialize new blocks end in
a colon (<code class="docutils literal notranslate"><span class="pre">:</span></code>), and code within the block is indented,
conventionally by a single tab or by 4 spaces. In Python in
<code class="docutils literal notranslate"><span class="pre">d/pyprepro</span></code> templates, initializing statements also end in colons,
but indentation is ignored, and code blocks continue until an <code class="docutils literal notranslate"><span class="pre">end</span></code>
statement is encountered.</p></li>
</ul>
</section>
<section id="conditionals">
<span id="interfaces-conditionals"></span><h3>Conditionals<a class="headerlink" href="#conditionals" title="Permalink to this headline"></a></h3>
<p>Python has the standard set of conditionals. Conditional block
declaration must end with a <code class="docutils literal notranslate"><span class="pre">:</span></code>, and the entire block must have an
<code class="docutils literal notranslate"><span class="pre">end</span></code> statement. Consider the following example:</p>
<div class="highlight-dakota notranslate"><div class="highlight"><pre><span></span>% param = 10.5
% if param == 10.0:
param is 10! See: {param}
% else:
param does not equal 10, it is {param}
% end

% if 10 &lt;= param &lt;= 11:
param ({param}) is between 10 and 11
% else:
param is out of range
% end
</pre></div>
</div>
<p>results in:</p>
<div class="highlight-dakota notranslate"><div class="highlight"><pre><span></span>param does not equal 10, it is 10.5

param (10.5) is between 10 and 11
</pre></div>
</div>
<p>Boolean operations are also possible using simple <code class="docutils literal notranslate"><span class="pre">and</span></code>, <code class="docutils literal notranslate"><span class="pre">or</span></code>, and
<code class="docutils literal notranslate"><span class="pre">not</span></code> syntax</p>
<div class="highlight-dakota notranslate"><div class="highlight"><pre><span></span>% param = 10.5
% if param &gt;= 10 and param &lt;= 11:
param is in [10 11]
% else:
param is NOT in [10,11]
% end
</pre></div>
</div>
<p>returns:</p>
<div class="highlight-dakota notranslate"><div class="highlight"><pre><span></span>param is in [10 11]
</pre></div>
</div>
</section>
<section id="loops">
<span id="interfaces-loops"></span><h3>Loops<a class="headerlink" href="#loops" title="Permalink to this headline"></a></h3>
<p><code class="docutils literal notranslate"><span class="pre">for</span></code> loops may be used to iterate over containers that support it. As
with conditionals, the declaration must end with <code class="docutils literal notranslate"><span class="pre">:</span></code> and the block
must have an <code class="docutils literal notranslate"><span class="pre">end</span></code>.</p>
<p>To iterate over an index, from 0 to 4, use the <code class="docutils literal notranslate"><span class="pre">range</span></code> command.</p>
<div class="highlight-dakota notranslate"><div class="highlight"><pre><span></span>% for ii in range(5):
{ii}
% end
</pre></div>
</div>
<p>This returns:</p>
<div class="highlight-dakota notranslate"><div class="highlight"><pre><span></span>0
1
2
3
4
</pre></div>
</div>
<p>This example demonstrates iteration over strings in a list:</p>
<div class="highlight-dakota notranslate"><div class="highlight"><pre><span></span>% animals = [&#39;cat&#39;,&#39;mouse&#39;,&#39;dog&#39;,&#39;lion&#39;]
% for animal in animals:
I want a {animal}
%end
</pre></div>
</div>
<p>The output is:</p>
<div class="highlight-dakota notranslate"><div class="highlight"><pre><span></span>I want a cat
I want a mouse
I want a dog
I want a lion
</pre></div>
</div>
</section>
<section id="lists">
<span id="interfaces-lists"></span><h3>Lists<a class="headerlink" href="#lists" title="Permalink to this headline"></a></h3>
<p>Lists are <em>zero indexed</em>. Negative indices are also supported, and are
interpreted as offsets from the last element in the negative direction.
Elements are accessed using square brackets (<code class="docutils literal notranslate"><span class="pre">[]</span></code>).</p>
<p>Consider:</p>
<div class="highlight-dakota notranslate"><div class="highlight"><pre><span></span>% animals = [&#39;cat&#39;,&#39;mouse&#39;,&#39;dog&#39;,&#39;lion&#39;]
{animals[0]}
{animals[-1]}
</pre></div>
</div>
<p>which results in:</p>
<div class="highlight-dakota notranslate"><div class="highlight"><pre><span></span>cat
lion
</pre></div>
</div>
<p>Note that <code class="docutils literal notranslate"><span class="pre">d/pyprepro</span></code> tries to nicely format lists for printing. For
certain types of objects, it may not work well.</p>
<div class="highlight-dakota notranslate"><div class="highlight"><pre><span></span>{theta = [0,45,90,135,180,225,270,315]}
</pre></div>
</div>
<p>(with <code class="docutils literal notranslate"><span class="pre">{ }</span></code> to print input) results in</p>
<div class="highlight-dakota notranslate"><div class="highlight"><pre><span></span>[0, 45, 90, 135, 180, 225, 270, 315]
</pre></div>
</div>
</section>
<section id="math-on-lists">
<span id="interfaces-math-on-lists"></span><h3>Math on lists<a class="headerlink" href="#math-on-lists" title="Permalink to this headline"></a></h3>
<p>Unlike some tools (e.g. MATLAB) mathematical operations may not be
performed on lists as a whole. Element-by-element operations can be
compactly written in many cases using <em>list comprehensions</em>:</p>
<div class="highlight-dakota notranslate"><div class="highlight"><pre><span></span>% theta = [0,45,90,135,180,225,270,315]
{ [ sin(pi*th/180) for th in theta ] }
</pre></div>
</div>
<p>This results in</p>
<div class="highlight-dakota notranslate"><div class="highlight"><pre><span></span>[0, 0.7071067812, 1, 0.7071067812, 1.224646799e-16, -0.7071067812, -1, -0.7071067812]
</pre></div>
</div>
<p>Alternatively, if the NumPy package is available on the host system,
lists can be converted to arrays, which do support MATLAB-style
element-wise operations:</p>
<div class="highlight-dakota notranslate"><div class="highlight"><pre><span></span>% theta = [0,45,90,135,180,225,270,315]
% import numpy as np
% theta = np.array(theta) # Redefine as numpy array
{ np.sin(pi*theta/180) }
</pre></div>
</div>
<p>Returns:</p>
<div class="highlight-dakota notranslate"><div class="highlight"><pre><span></span>[0, 0.7071067812, 1, 0.7071067812, 1.224646799e-16, -0.7071067812, -1, -0.7071067812]
</pre></div>
</div>
</section>
<section id="strings">
<span id="interfaces-strings"></span><h3>Strings<a class="headerlink" href="#strings" title="Permalink to this headline"></a></h3>
<p>Python has powerful and extensive string support. Strings can be
initialized in any of the following ways:</p>
<div class="highlight-dakota notranslate"><div class="highlight"><pre><span></span>{mystring1=&quot;&quot;&quot;
multi-line
string inline
<span class="s">&quot;&quot;&quot;</span>}
{mystring1}
{% mystring2 = &#39;&#39;&#39;
another multi-line example
but in a block
<span class="s">&#39;&#39;&#39;</span> %}
mystring2: {mystring2}

Single quotes: {&#39;single&#39;}
Double quotes: {&#39;double&#39;}
</pre></div>
</div>
<p>Which returns:</p>
<div class="highlight-dakota notranslate"><div class="highlight"><pre><span></span>multi-line
string inline


multi-line
string inline

mystring2:
another multi-line example
but in a block


Single quotes: single
Double quotes: double
</pre></div>
</div>
<p>Strings can be enclosed by either single quotes (<code class="docutils literal notranslate"><span class="pre">'</span></code>) or double quotes
(<code class="docutils literal notranslate"><span class="pre">&quot;</span></code>). The choice is a matter of convenience or style.</p>
<p>Strings can be joined by adding them:</p>
<div class="highlight-dakota notranslate"><div class="highlight"><pre><span></span>{%
a = &#39;A&#39;
b = &#39;B&#39;
%}
{a + &#39; &#39; + b}
</pre></div>
</div>
<p>returns:</p>
<div class="highlight-dakota notranslate"><div class="highlight"><pre><span></span>A B
</pre></div>
</div>
</section>
<section id="custom-functions">
<span id="interfaces-custom-functions"></span><h3>Custom Functions<a class="headerlink" href="#custom-functions" title="Permalink to this headline"></a></h3>
<p>Arbitrary functions can be defined using either <code class="docutils literal notranslate"><span class="pre">def</span></code> or <code class="docutils literal notranslate"><span class="pre">lambda</span></code>.</p>
<p>Consider the following: (note, we use indentation here for readability
but indentation <em>is ignored</em> and the function definition is terminated
with <code class="docutils literal notranslate"><span class="pre">end</span></code>):</p>
<div class="highlight-dakota notranslate"><div class="highlight"><pre><span></span>{%
def myfun1(param):
    return (param + 1) ** 2 + 3
end

myfun2 = lambda param: (param + 1) ** 2 + 5
%}
{myfun1(1.2)}
{myfun2(1.2)}
{ [ myfun1(x) for x in [1,2,3,4] ] }
</pre></div>
</div>
<p>Returns:</p>
<div class="highlight-dakota notranslate"><div class="highlight"><pre><span></span>7.84
9.84
[7, 12, 19, 28]
</pre></div>
</div>
</section>
</section>
<section id="auxiliary-functions">
<span id="interfaces-auxiliary-functions"></span><h2>Auxiliary Functions<a class="headerlink" href="#auxiliary-functions" title="Permalink to this headline"></a></h2>
<p>Several auxiliary functions that are not part of Python are also
available within templates. The first is the <code class="docutils literal notranslate"><span class="pre">include</span></code> function.</p>
<section id="include">
<span id="interfaces-include"></span><h3>Include<a class="headerlink" href="#include" title="Permalink to this headline"></a></h3>
<p>Using</p>
<div class="highlight-dakota notranslate"><div class="highlight"><pre><span></span>% include(&#39;path/to/include.txt&#39;)
</pre></div>
</div>
<p>will insert the contents of <code class="docutils literal notranslate"><span class="pre">path/to/include.txt</span></code>. The inserted file
can contain new variable definitions, and it can access older ones.
Parameters defined in the file are not immutable by default, unlike
those defined in files included from the command line using the
<code class="docutils literal notranslate"><span class="pre">--include</span></code> option.</p>
<p><code class="docutils literal notranslate"><span class="pre">d/pyprepro</span></code> performs limited searching for included files, first in
the path of the original template, and then in the path where
<code class="docutils literal notranslate"><span class="pre">pyprepro</span></code> is executed.</p>
</section>
<section id="immutable-and-mutable">
<span id="interfaces-immutable-and-mutable"></span><h3>Immutable and Mutable<a class="headerlink" href="#immutable-and-mutable" title="Permalink to this headline"></a></h3>
<p>As explained elsewhere, variables can be defined as <code class="docutils literal notranslate"><span class="pre">Immutable(value)</span></code>
or <code class="docutils literal notranslate"><span class="pre">Mutable(value)</span></code>. If a variable is Immutable, it cannot be
reassigned without first explicitly make it Mutable.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Unlike <a class="reference internal" href="../../../externaltools/dpreproandpyprepro.html#interfaces-immutable-variables"><span class="std std-ref">variables defined via - -include</span></a>,
variables from files read in using the <code class="docutils literal notranslate"><span class="pre">include()</span></code> function are Mutable by
default.</p>
</div>
</section>
<section id="print-all-variables">
<span id="interfaces-print-all-variables"></span><h3>Print All Variables<a class="headerlink" href="#print-all-variables" title="Permalink to this headline"></a></h3>
<p><code class="docutils literal notranslate"><span class="pre">all_vars()</span></code> and <code class="docutils literal notranslate"><span class="pre">all_var_names()</span></code> print out all <em>defined</em>
variables. Consider the following that also demonstrates setting a
comment string (two ways)</p>
<div class="highlight-dakota notranslate"><div class="highlight"><pre><span></span>% param1 = 1
{param2 = &#39;two&#39;}
all variables and values: {all_vars()}
all varables: {all_var_names()}

{all_var_names(comment=&#39;//&#39;)}
// {all_var_names()} &lt;--- Don&#39;t do this
</pre></div>
</div>
<p>Returns:</p>
<div class="highlight-dakota notranslate"><div class="highlight"><pre><span></span>two
all variables and values: {&#39;param1&#39;: 1, &#39;param2&#39;: u&#39;two&#39;}
all varables: [&#39;param2&#39;, &#39;param1&#39;]

// [&#39;param2&#39;, &#39;param1&#39;]
// [&#39;param2&#39;, &#39;param1&#39;] &lt;--- Don&#39;t do this
</pre></div>
</div>
<p>Notice the empty <code class="docutils literal notranslate"><span class="pre">()</span></code> at the end of <code class="docutils literal notranslate"><span class="pre">all_vars</span></code> and
<code class="docutils literal notranslate"><span class="pre">all_var_names</span></code>. If possible, it is better to use <code class="docutils literal notranslate"><span class="pre">comment=//</span></code>
syntax since the result of these can be multiple lines.</p>
</section>
<section id="set-global-numerical-format">
<span id="interfaces-set-global-print-format"></span><h3>Set Global Numerical Format<a class="headerlink" href="#set-global-numerical-format" title="Permalink to this headline"></a></h3>
<p>As discussed elsewhere, the print format can be set on a per item basis
by manually converting to a string. Alternatively, it can be (re)set
globally inside the template (as well as at the command line).</p>
<div class="highlight-dakota notranslate"><div class="highlight"><pre><span></span>{pi}
% setfmt(&#39;%0.3e&#39;)
{pi}
% setfmt() # resets
{pi}
</pre></div>
</div>
<p>returns:</p>
<div class="highlight-dakota notranslate"><div class="highlight"><pre><span></span>3.141592654
3.142e+00
3.141592654
</pre></div>
</div>
</section>
<section id="per-field-output-formatting">
<span id="interfaces-per-field-output-formatting"></span><h3>Per-field Output Formatting<a class="headerlink" href="#per-field-output-formatting" title="Permalink to this headline"></a></h3>
<p>Use Python string formatting syntax to set the output format of a
particular expression.</p>
<div class="highlight-dakota notranslate"><div class="highlight"><pre><span></span>{pi}
{ &#39;%0.3f&#39; % pi }
</pre></div>
</div>
<p>Will output:</p>
<div class="highlight-dakota notranslate"><div class="highlight"><pre><span></span>3.141592654
3.142
</pre></div>
</div>
</section>
<section id="defaults-and-undefined-parameters">
<span id="interfaces-using-defaults-undefined-parameters"></span><h3>Defaults and Undefined Parameters<a class="headerlink" href="#defaults-and-undefined-parameters" title="Permalink to this headline"></a></h3>
<p>Directly calling undefined parameters will result in an error. There is
no <em>universal</em> default value. However, there are the following
functions:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">get</span></code> – get param with optional default</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">defined</span></code> – determine if the variable is defined</p></li>
</ul>
<p>The usage is explained in the following examples:</p>
<div class="highlight-dakota notranslate"><div class="highlight"><pre><span></span>Defined Parameter:
% param1 = &#39;one&#39;
{ get(&#39;param1&#39;) } &lt;-- one
{ get(&#39;param1&#39;,&#39;ONE&#39;) } &lt;-- one

Undefined Parameter
{ get(&#39;param2&#39;) } &lt;-- *blank*
{ get(&#39;param2&#39;,0) } &lt;-- 0

Check if defined: { defined(&#39;param2&#39;) }

% if defined(&#39;param2&#39;):
param2 is defined: {param2}
% else:
param2 is undefined
% end
</pre></div>
</div>
<p>returns:</p>
<div class="highlight-dakota notranslate"><div class="highlight"><pre><span></span>Defined Parameter:
one &lt;-- one
one &lt;-- one

Undefined Paremater
 &lt;-- *blank*
0 &lt;-- 0

Check if defined: False

param2 is undefined
</pre></div>
</div>
<p>But notice if you have the following:</p>
<div class="highlight-dakota notranslate"><div class="highlight"><pre><span></span>{param3}
</pre></div>
</div>
<p>you will get the following error:</p>
<div class="highlight-dakota notranslate"><div class="highlight"><pre><span></span>Error occurred:
    NameError: name &#39;param3&#39; is not defined
</pre></div>
</div>
</section>
<section id="mathematical-functions">
<span id="interfaces-mathematical-functions"></span><h3>Mathematical Functions<a class="headerlink" href="#mathematical-functions" title="Permalink to this headline"></a></h3>
<p>All of the Python <code class="docutils literal notranslate"><span class="pre">math</span></code> module in imported with the functions:</p>
<div class="highlight-dakota notranslate"><div class="highlight"><pre><span></span>acos       degrees     gamma   radians
acosh      erf         hypot   sin
asin       erfc        isinf   sinh
asinh      exp         isnan   sqrt
atan       expm1       ldexp   tan
atan2      fabs        lgamma  tanh
atanh      factorial   log     trunc
ceil       floor       log10
copysign   fmod        log1p
cos        frexp       modf
cosh       fsum
</pre></div>
</div>
<p>Also included are the following constants</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 68%" />
<col style="width: 32%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">pi</span></code>,<code class="docutils literal notranslate"><span class="pre">PI</span></code></p></td>
<td><p>3.141592654</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">e</span></code>,<code class="docutils literal notranslate"><span class="pre">E</span></code></p></td>
<td><p>2.718281828</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">tau</span></code> (<code class="docutils literal notranslate"><span class="pre">2*pi</span></code>)</p></td>
<td><p>6.283185307</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">deg</span></code> (<code class="docutils literal notranslate"><span class="pre">180/pi</span></code>)</p></td>
<td><p>57.29577951</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">rad</span></code> (<code class="docutils literal notranslate"><span class="pre">pi/180</span></code>)</p></td>
<td><p>0.01745329252</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">phi</span></code> (<code class="docutils literal notranslate"><span class="pre">(sqrt(5)+1 )/2</span></code>)</p></td>
<td><p>1.618033989</p></td>
</tr>
</tbody>
</table>
<p>Note that all trigonometric functions assume that inputs are in radians.
See <a class="reference external" href="https://docs.Python.org/3/library/math.html">Python’s “math” library</a> for more
details. To compute based on degrees, convert first:</p>
<div class="highlight-dakota notranslate"><div class="highlight"><pre><span></span>{ tan( radians(45) )}
{ tan( 45*rad)}
{ degrees( atan(1) )}
{ atan(1) * deg }
</pre></div>
</div>
<p>returns:</p>
<div class="highlight-dakota notranslate"><div class="highlight"><pre><span></span>1
1
45
45
</pre></div>
</div>
</section>
<section id="other-functions">
<span id="interfaces-other-functions"></span><h3>Other Functions<a class="headerlink" href="#other-functions" title="Permalink to this headline"></a></h3>
<p>Other functions, modules, and packages that are part of the Python
standard library or that are available for import on the host system can
be used in templates. Use of NumPy to perform element-wise operations on
arrays was demonstrated in a previous section. The following example
illustrates using Python’s <code class="docutils literal notranslate"><span class="pre">random</span></code> module to draw a sample from a
uniform distribution:</p>
<div class="highlight-dakota notranslate"><div class="highlight"><pre><span></span>% from random import random,seed
% seed(1)
{A = random()}
</pre></div>
</div>
<p>Returns (may depend on the system)</p>
<div class="highlight-dakota notranslate"><div class="highlight"><pre><span></span>0.1343642441
</pre></div>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="mappingexamples.html" class="btn btn-neutral float-left" title="Parameter to Response Mapping Examples" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../responses.html" class="btn btn-neutral float-right" title="Responses" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <!--
  <div role="contentinfo">
    <p>&#169; Copyright 2023, Sandia National Laboratories.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
  
  --> 

</footer>
        </div>
      </div>
	  
	  <div style="background-color: #0f0f0f;color:#fafafa;padding:20px">
	    <div>
		  <h2><em>Exceptional service in the national interest</em></h2>
		</div>
		<p>© 2023 National Technology and Engineering Solutions of Sandia, LLC. | <a href="https://www.sandia.gov/contact_us/index.html">Questions &amp; Comments</a> | <a href="https://www.sandia.gov/general/privacy-security/index.html">Privacy &amp; Security</a></p>
		<p><a href="http://energy.gov" rel="noopener noreferrer" target="_blank"><img alt="U.S. Department of Energy" longdesc="https://energy.gov" src="https://www.sandia.gov/_common/images/doe_logo_white.png" style="height:37px; width:140px"></a> <a href="http://nnsa.energy.gov/" rel="noopener noreferrer" target="_blank"> <img alt="National Nuclear Security Administration" longdesc="http://nnsa.gov" src="https://www.sandia.gov/_common/images/nnsa_logo_white.png" style="height:37px; width:116px"></a></p>
		<p><a href="https://www.sandia.gov">Sandia National Laboratories</a> is a multimission laboratory managed and operated by National Technology and Engineering Solutions of Sandia, LLC., a wholly owned subsidiary of Honeywell International, Inc., for the U.S. Department of Energy’s National Nuclear Security Administration under contract DE-NA-0003525.</p>
	  </div>	  	  
	  
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>