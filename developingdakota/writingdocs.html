<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Writing Dakota Documentation &mdash; dakota  documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/dakota_theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/sandiaheaderlite.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Dakota’s Third-Party Libraries" href="tpls.html" />
    <link rel="prev" title="Testing Dakota Code" href="testingcode.html" /> 
  
  <meta name="sandia.approval_type" content="formal"/>
  <meta property="sandia.approved" content="SAND2022-15651 O"/>
  <meta name="description" content="The Dakota project delivers both state-of-the-art research and robust, usable software for optimization and UQ."/>
  <meta name="keywords" content="Dakota, optimization, UQ, uncertainty quantification, parametric analysis, design exploration, model calibration, risk analysis"/>
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> dakota
            <img src="../_static/dakota_Arrow_Name_Tag_horiz_transparent.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../setupdakota.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usingdakota/usingdakota.html">Using Dakota</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usingdakotagui/usingdakotagui.html">Using Dakota GUI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../externaltools/externaltools.html">Using External Tools</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="developingdakota.html">Developing Dakota</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="devenvironment.html">Setup Your Development Environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="gitforversioncontrol.html">Git for Version Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="writingcode.html">Writing Dakota Code</a></li>
<li class="toctree-l2"><a class="reference internal" href="testingcode.html">Testing Dakota Code</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Writing Dakota Documentation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#install-sphinx-and-packages">Install Sphinx and Packages</a></li>
<li class="toctree-l3"><a class="reference internal" href="#interactive-documentation-build">Interactive Documentation Build</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#bare-sphinx-build">Bare Sphinx Build</a></li>
<li class="toctree-l4"><a class="reference internal" href="#cmake-based-build-on-mac-linux">CMake-based Build on Mac/Linux</a></li>
<li class="toctree-l4"><a class="reference internal" href="#cmake-based-on-windows">CMake-based on Windows</a></li>
<li class="toctree-l4"><a class="reference internal" href="#keyword-reference-pages">Keyword Reference Pages</a></li>
<li class="toctree-l4"><a class="reference internal" href="#legacy-convert-latex-to-rst-through-pandoc">Legacy: Convert LaTeX to RST through Pandoc</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="tpls.html">Dakota’s Third-Party Libraries</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../misc/misc.html">Miscellaneous</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">dakota</a>
      </nav>

	  <!-- SNL Lite header -->
	  <div class="snlheader-subsite--wrapper-default">
		<snlheader class="snlheader-subsite" role="snlbanner">
		  <div class="wrapper">
			<a href="https://www.sandia.gov/index.html">
			  <div class="logo-transparent"><p class="logo">Sandia National Laboratories</p></div>
			</a>
			<div class="nav-top">
			  <a class="visuallyhidden" name="mainnav"></a>
			  <div aria-label="main navigation" class="core-nav-transparent core-nav-transparent--visible" role="navigation">
				<ul role="navigation" class="secondary-links">
				  <li id="search-text-link">
					<a aria-label="Search" href="https://www.sandia.gov/search/">Search Sandia.gov</a>
				  </li>
				  <li id="directory-text-link">
					<a href="https://www.sandia.gov/directory.html" aria-expanded="false" aria-label="Site Directory">All Sandia Websites</a>
				  </li>
				</ul>
			  </div>
			</div>
		  </div> 
		</snlheader>
	  </div>	  

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="developingdakota.html">Developing Dakota</a> &raquo;</li>
      <li>Writing Dakota Documentation</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/developingdakota/writingdocs.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="writing-dakota-documentation">
<h1>Writing Dakota Documentation<a class="headerlink" href="#writing-dakota-documentation" title="Permalink to this headline"></a></h1>
<section id="install-sphinx-and-packages">
<h2>Install Sphinx and Packages<a class="headerlink" href="#install-sphinx-and-packages" title="Permalink to this headline"></a></h2>
<div class="highlight-dakota notranslate"><div class="highlight"><pre><span></span>pip install --user -U Sphinx
pip install --user -U myst-parser
pip install --user -U sphinx-rtd-theme
pip install --user -U sphinxcontrib-bibtex
</pre></div>
</div>
</section>
<section id="interactive-documentation-build">
<h2>Interactive Documentation Build<a class="headerlink" href="#interactive-documentation-build" title="Permalink to this headline"></a></h2>
<section id="bare-sphinx-build">
<h3>Bare Sphinx Build<a class="headerlink" href="#bare-sphinx-build" title="Permalink to this headline"></a></h3>
<p>A bare <code class="docutils literal notranslate"><span class="pre">sphinx-build</span></code> command will build almost all of the documentation, except for keyword reference pages and sample Dakota input files.</p>
<div class="highlight-dakota notranslate"><div class="highlight"><pre><span></span>cd &lt;dakota checkout&gt;/docs/user
sphinx-build -b html &lt;source dir&gt; &lt;build dir&gt;
<span class="c"># to speed up build using all available cores (may suppress some cross reference and other warnings/errors):</span>
sphinx-build -b html -j auto &lt;source dir&gt; &lt;build dir&gt;
</pre></div>
</div>
</section>
<section id="cmake-based-build-on-mac-linux">
<h3>CMake-based Build on Mac/Linux<a class="headerlink" href="#cmake-based-build-on-mac-linux" title="Permalink to this headline"></a></h3>
<p>This build process is more similar to historical documentation build using the routine CMake-based build process.</p>
<p><strong>Prerequisites</strong></p>
<ul class="simple">
<li><p>Python and the Sphinx Python tools specified above, with the sphinx-build executable on your PATH.</p></li>
<li><p>Java JDK 11 or newer. For example on RHEL7 install java-11-openjdk-devel from EPEL and specify JAVA_HOME:PATH=/usr/lib/jvm/java-11 to CMake</p></li>
<li><p>Doxygen 1.8.20 or newer (for C++ docs/dev manual)</p></li>
<li><p>LaTeX (for PDF output), probably 2015 or newer will do</p></li>
<li><p>Perl for generating user manual input samples</p></li>
</ul>
<p><strong>Building / Editing</strong></p>
<p>First, configure Dakota with CMake, enabling documentation as usual, e.g., specifying the Boolean ENABLE_DAKOTA_DOCS or the typical developer
convenience macros such as DevDistro. You may need to help CMake find Java JDK 11 per above. While in theory reference manual building should work without
enabling tests, enabling them via DAKOTA_ENABLE_TESTS may be a safer choice.</p>
<p>Then build the docs-sphinx target (or optionally the docs-keywords, then docs-sphinx target, but the dependency is tracked) via IDE or command line, e.g.,</p>
<div class="highlight-dakota notranslate"><div class="highlight"><pre><span></span>cd &lt;dakota build&gt;/docs
<span class="c"># Generate reference content (will be built automatically by the dependent targets)</span>
make docs-keywords

<span class="c"># Build the whole sphinx manual in serial</span>
make docs-user
<span class="c"># Build the whole sphinx manual in parallel much faster but may omit some warnings/errors</span>
make docs-user-fast
<span class="c"># Remove output dir user-html</span>
make docs-user-clean

<span class="c"># Generate C++ Doxygen developer manual (requires LaTeX)</span>
cd &lt;dakota build&gt;/docs/dev
make docs-dev-html
make docs-dev-pdf
</pre></div>
</div>
<p><em>Notes:</em></p>
<ul class="simple">
<li><p>The build is setup to use all available cores to build the docs, so should only take a couple minutes.</p></li>
<li><p>The keyword files will get generated directly into the source tree at &lt;dakota source&gt;/docs/user/usingdakota/reference (for now) while the generated manual will appear in &lt;dakota build&gt;/docs/user-html/</p></li>
<li><p>Note that historical targets for building User’s, and Theory manuals remain in inactive and are activate with DAKOTA_DOCS_LEGACY, but not Reference, since they are (1) broken and (2) subsumed by the new process.</p></li>
</ul>
<p><em>Development Process Notes:</em></p>
<ul class="simple">
<li><p>When iteratively editing, if you edit a file in the keywords/ directory it should make the docs-keywords (and therefore docs-sphinx) target out of date.</p></li>
<li><p>If you add a new keywords/ file you likely need to touch &lt;dakota source&gt;/docs/CMakeLists.txt to force a rescan of files</p></li>
<li><p>You may need to force remove the sphinx output tree &lt;dakota build&gt;/docs/user-html/ to force a rebuild</p></li>
</ul>
</section>
<section id="cmake-based-on-windows">
<h3>CMake-based on Windows<a class="headerlink" href="#cmake-based-on-windows" title="Permalink to this headline"></a></h3>
<p>You can build the user manual in its entirety on Windows using CMake, though currently Visual Studio is required.</p>
<p>Requirements:</p>
<ul class="simple">
<li><p>CMake</p></li>
<li><p>Perl</p></li>
<li><p>Python + Sphinx</p></li>
<li><p>Java 11 JDK</p></li>
<li><p>Visual Studio (community edition will work)</p></li>
</ul>
<p>Command prompt config example, since I didn’t have sphinx-build on my global PATH. If you do, or you set a variable like <a class="reference external" href="https://cmake.org/cmake/help/latest/variable/CMAKE_PROGRAM_PATH.html#variable:CMAKE_PROGRAM_PATH">https://cmake.org/cmake/help/latest/variable/CMAKE_PROGRAM_PATH.html#variable:CMAKE_PROGRAM_PATH</a> to find it, you can likely do this from the CMake GUI</p>
<div class="highlight-dakota notranslate"><div class="highlight"><pre><span></span>set PATH=C:\Users\briadam\AppData\Roaming\Python\Python310\Scripts;%PATH%
cmake -D DAKOTA_DOCS_DEV:BOOL=FALSE -D JAVA_HOME:PATH=&quot;C:\Program Files\Eclipse Adoptium\jdk-11.0.16.8-hotspot&quot; -D Python_EXECUTABLE=C:\Python310\python.exe ..\source\docs
</pre></div>
</div>
<p>After which you can open DakotaDocs.sln in Visual Studio and build some or all of the projects.</p>
<p>Alternately, from command line in the build dir: <code class="docutils literal notranslate"><span class="pre">cmake</span> <span class="pre">--build</span> <span class="pre">.</span> <span class="pre">--target</span> <span class="pre">docs-user-samples</span></code></p>
</section>
<section id="keyword-reference-pages">
<h3>Keyword Reference Pages<a class="headerlink" href="#keyword-reference-pages" title="Permalink to this headline"></a></h3>
<p><em>The following section only applies if you are building all the documentation without CMake. The existing CMake build process will handle keyword reference page generation automatically.</em></p>
<p>Fully-fleshed-out keyword reference pages are not checked in under with the rest of the documentation files in the <code class="docutils literal notranslate"><span class="pre">docs/user</span></code> folder. The keyword documentation
contents are stored in the <code class="docutils literal notranslate"><span class="pre">docs/keywords</span></code> folder. In this folder, each file contains RST snippets, with custom Dakota markdown that demarcates the sections in
each file. These files need to be built into full RST pages before being added to the larger Sphinx manual. To add these keyword reference pages to the Sphinx build,
you must perform the following additional steps:</p>
<ol class="arabic simple">
<li><p>Acquire a Java IDE (such as Eclipse or IntelliJ). The next step will be much easier for you if you get an IDE to manage your Java classpath for you.</p></li>
<li><p>Run the RefManGenerator application in the java_utils project, using “&lt;dakota checkout&gt;/docs/keywords” as the first argument and an empty output folder as the second argument.</p></li>
<li><p>After RefManGenerator finishes running, copy all the output from your output folder to “&lt;dakota checkout&gt;/docs/user/usingdakota/reference” folder</p></li>
<li><p>Run the build commands in the “Bare Sphinx Build” section. Make sure that build detects all the keyword pages that you copied (i.e. it should take longer to build)</p></li>
</ol>
<p><strong>Important:</strong> Note that if you are hunting down documentation errors by line number, the line numbers displayed in Sphinx build warnings/errors allude to the fully-built
keyword RST pages, NOT the RST snippet files in docs/keywords. However, the original snippet files will be where you want to ultimately make the correction.</p>
</section>
<section id="legacy-convert-latex-to-rst-through-pandoc">
<h3>Legacy: Convert LaTeX to RST through Pandoc<a class="headerlink" href="#legacy-convert-latex-to-rst-through-pandoc" title="Permalink to this headline"></a></h3>
<div class="highlight-dakota notranslate"><div class="highlight"><pre><span></span>pandoc -f latex -t rst Users_Preface.tex -o Users_Preface.rst
</pre></div>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="testingcode.html" class="btn btn-neutral float-left" title="Testing Dakota Code" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="tpls.html" class="btn btn-neutral float-right" title="Dakota’s Third-Party Libraries" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <!--
  <div role="contentinfo">
    <p>&#169; Copyright 2022, Sandia National Laboratories.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
  
  --> 

</footer>
        </div>
      </div>
	  
	  <div style="background-color: #0f0f0f;color:#fafafa;padding:20px">
	    <div>
		  <h2><em>Exceptional service in the national interest</em></h2>
		</div>
		<p>© 2022 National Technology and Engineering Solutions of Sandia, LLC. | <a href="https://www.sandia.gov/contact_us/index.html">Questions &amp; Comments</a> | <a href="https://www.sandia.gov/general/privacy-security/index.html">Privacy &amp; Security</a></p>
		<p><a href="http://energy.gov" rel="noopener noreferrer" target="_blank"><img alt="U.S. Department of Energy" longdesc="https://energy.gov" src="https://www.sandia.gov/_common/images/doe_logo_white.png" style="height:37px; width:140px"></a> <a href="http://nnsa.energy.gov/" rel="noopener noreferrer" target="_blank"> <img alt="National Nuclear Security Administration" longdesc="http://nnsa.gov" src="https://www.sandia.gov/_common/images/nnsa_logo_white.png" style="height:37px; width:116px"></a></p>
		<p><a href="https://www.sandia.gov">Sandia National Laboratories</a> is a multimission laboratory managed and operated by National Technology and Engineering Solutions of Sandia, LLC., a wholly owned subsidiary of Honeywell International, Inc., for the U.S. Department of Energy’s National Nuclear Security Administration under contract DE-NA-0003525.</p>
	  </div>	  	  
	  
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>